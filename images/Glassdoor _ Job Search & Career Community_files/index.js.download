import{a as Je}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-VZ76K4MA.js";import{a as De,b as Dt,c as an,d as cn,e as gn,f as oi,g as Pn,h as G,j as Ut,k as Dn,l as Ln}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-MOXQE43W.js";import{a as On,b as Rn,h as Bn}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-V3O3M5GB.js";import{a as Nn}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-2KJVGTUX.js";import{c as re,d as Lt,e as dn,f as Ee,g as ln,k as xn,m as kn,o as Cn,q as Tn,s as In,t as _n,u as An,v as Mn}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-Y4IMX6V7.js";import"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-3GLNKT3D.js";import{g as Un,j as Fn}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-OEFJD3TC.js";import"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-3TNJXLLI.js";import{a as un,b as pn,d as xe,e as mn,h as Le,i as ke}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-7WVXBQFZ.js";import"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-NERQ6NGQ.js";import{a as Qr,b as en,c as Bt,d as tn,e as rn,f as nn,i as on,j as sn,k as de}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-ZGEMMB6U.js";import"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-PA6PDU3X.js";import{a as or,d as fn,e as Ue}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-JYWNZJXO.js";import{a as sr,b as ar,c as cr}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-ODZD4ELA.js";import{a as Oe}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-K3WSSSYD.js";import"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-QTEQ356W.js";import"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-ADJ7UAUZ.js";import"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-ZBRGLHHR.js";import{a as Ar,d as Mr,e as Q,f as Nr,g as ae}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-KCXEVZLR.js";import{$a as Ze,$b as hn,A as yr,B as xt,Ba as _t,C as ve,Cb as Be,D as kt,Da as At,E as Ge,Ea as ce,Eb as Yr,F as br,Fa as Z,G as Ct,Gb as Zr,H as wr,Hb as Rt,I as vr,Ib as Xr,Ic as En,J as Sr,K as Er,Kb as Jr,L as Pe,Lb as Xe,M as xr,Ma as Br,N as kr,Na as te,O as Cr,Q as Tr,R as Ir,Ra as Mt,Sa as Nt,Ta as Se,Ua as Dr,V as _r,W as $,Wa as ge,Wb as j,Xa as Lr,Ya as Ur,Za as Fr,_a as Ye,a as ri,b as ni,bb as $r,c as U,d as F,e as f,f as z,fb as Kr,g as me,gb as Hr,h as B,ha as ee,hb as Wr,i as J,j as ir,jb as zr,k as x,kb as Vr,kc as yn,l as dr,lb as jr,lc as bn,m as lr,mb as Re,n as H,na as Tt,nb as Pt,nc as wn,o as Ne,p as A,pc as vn,q as ur,r as pr,rc as Sn,s as mr,sa as It,sb as qr,t as gr,ta as Pr,tb as fe,u as fr,ub as Ot,v as hr,va as Or,w as N,wa as Rr,x as St,xb as Gr,y as se,z as Et}from"./c6412691f3ede94650c4c4fe085d625df3a546c5-chunk-R63CLJBT.js";var Wo=ri((He,pt)=>{f();(function(t,e){"use strict";var r="0.7.33",n="",o="?",i="function",l="undefined",u="object",m="string",b="major",s="model",p="name",d="type",c="vendor",a="version",y="architecture",w="console",h="mobile",g="tablet",v="smarttv",S="wearable",D="embedded",I=350,O="Amazon",P="Apple",q="ASUS",ie="BlackBerry",Y="Browser",pe="Chrome",mt="Edge",ye="Firefox",be="Google",Ie="Huawei",gt="LG",ft="Microsoft",Zt="Motorola",We="Opera",ht="Samsung",Xt="Sharp",ze="Sony",yt="Xiaomi",bt="Zebra",Jt="Facebook",Qo=function(k,M){var C={};for(var L in k)M[L]&&M[L].length%2===0?C[L]=M[L].concat(k[L]):C[L]=k[L];return C},Ve=function(k){for(var M={},C=0;C<k.length;C++)M[k[C].toUpperCase()]=k[C];return M},Qt=function(k,M){return typeof k===m?_e(M).indexOf(_e(k))!==-1:!1},_e=function(k){return k.toLowerCase()},ei=function(k){return typeof k===m?k.replace(/[^\d\.]/g,n).split(".")[0]:e},wt=function(k,M){if(typeof k===m)return k=k.replace(/^\s\s*/,n),typeof M===l?k:k.substring(0,I)},Ae=function(k,M){for(var C=0,L,T,qe,R,Me,X;C<M.length&&!Me;){var rr=M[C],nr=M[C+1];for(L=T=0;L<rr.length&&!Me;)if(Me=rr[L++].exec(k),Me)for(qe=0;qe<nr.length;qe++)X=Me[++T],R=nr[qe],typeof R===u&&R.length>0?R.length===2?typeof R[1]==i?this[R[0]]=R[1].call(this,X):this[R[0]]=R[1]:R.length===3?typeof R[1]===i&&!(R[1].exec&&R[1].test)?this[R[0]]=X?R[1].call(this,X,R[2]):e:this[R[0]]=X?X.replace(R[1],R[2]):e:R.length===4&&(this[R[0]]=X?R[3].call(this,X.replace(R[1],R[2])):e):this[R]=X||e;C+=2}},vt=function(k,M){for(var C in M)if(typeof M[C]===u&&M[C].length>0){for(var L=0;L<M[C].length;L++)if(Qt(M[C][L],k))return C===o?e:C}else if(Qt(M[C],k))return C===o?e:C;return k},ti={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},er={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},tr={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[a,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[a,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,a],[/opios[\/ ]+([\w\.]+)/i],[a,[p,We+" Mini"]],[/\bopr\/([\w\.]+)/i],[a,[p,We]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,a],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[a,[p,"UC"+Y]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[a,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[a,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[a,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[a,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[a,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+Y],a],[/\bfocus\/([\w\.]+)/i],[a,[p,ye+" Focus"]],[/\bopt\/([\w\.]+)/i],[a,[p,We+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[a,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[a,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[a,[p,We+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[a,[p,"MIUI "+Y]],[/fxios\/([-\w\.]+)/i],[a,[p,ye]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+Y]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+Y],a],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],a],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,a],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,Jt],a],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,a],[/\bgsa\/([\w\.]+) .*safari\//i],[a,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[a,[p,pe+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,pe+" WebView"],a],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[a,[p,"Android "+Y]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,a],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[a,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[a,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[a,vt,ti]],[/(webkit|khtml)\/([\w\.]+)/i],[p,a],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],a],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[a,[p,ye+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,a],[/(cobalt)\/([\w\.]+)/i],[p,[a,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,_e]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,n,_e]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,_e]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[s,[c,ht],[d,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[s,[c,ht],[d,h]],[/((ipod|iphone)\d+,\d+)/i],[s,[c,P],[d,h]],[/(ipad\d+,\d+)/i],[s,[c,P],[d,g]],[/\((ip(?:hone|od)[\w ]*);/i],[s,[c,P],[d,h]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[c,P],[d,g]],[/(macintosh);/i],[s,[c,P]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[s,[c,Ie],[d,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[s,[c,Ie],[d,h]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[s,/_/g," "],[c,yt],[d,h]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[s,/_/g," "],[c,yt],[d,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[s,[c,"OPPO"],[d,h]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[s,[c,"Vivo"],[d,h]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[s,[c,"Realme"],[d,h]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[s,[c,Zt],[d,h]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[s,[c,Zt],[d,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[s,[c,gt],[d,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[s,[c,gt],[d,h]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[s,[c,"Lenovo"],[d,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[s,/_/g," "],[c,"Nokia"],[d,h]],[/(pixel c)\b/i],[s,[c,be],[d,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[s,[c,be],[d,h]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[c,ze],[d,h]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[s,"Xperia Tablet"],[c,ze],[d,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[s,[c,"OnePlus"],[d,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[s,[c,O],[d,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[s,/(.+)/g,"Fire Phone $1"],[c,O],[d,h]],[/(playbook);[-\w\),; ]+(rim)/i],[s,c,[d,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[s,[c,ie],[d,h]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[s,[c,q],[d,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[s,[c,q],[d,h]],[/(nexus 9)/i],[s,[c,"HTC"],[d,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[c,[s,/_/g," "],[d,h]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[s,[c,"Acer"],[d,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[s,[c,"Meizu"],[d,h]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[s,[c,Xt],[d,h]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,s,[d,h]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,s,[d,g]],[/(surface duo)/i],[s,[c,ft],[d,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[s,[c,"Fairphone"],[d,h]],[/(u304aa)/i],[s,[c,"AT&T"],[d,h]],[/\bsie-(\w*)/i],[s,[c,"Siemens"],[d,h]],[/\b(rct\w+) b/i],[s,[c,"RCA"],[d,g]],[/\b(venue[\d ]{2,7}) b/i],[s,[c,"Dell"],[d,g]],[/\b(q(?:mv|ta)\w+) b/i],[s,[c,"Verizon"],[d,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[s,[c,"Barnes & Noble"],[d,g]],[/\b(tm\d{3}\w+) b/i],[s,[c,"NuVision"],[d,g]],[/\b(k88) b/i],[s,[c,"ZTE"],[d,g]],[/\b(nx\d{3}j) b/i],[s,[c,"ZTE"],[d,h]],[/\b(gen\d{3}) b.+49h/i],[s,[c,"Swiss"],[d,h]],[/\b(zur\d{3}) b/i],[s,[c,"Swiss"],[d,g]],[/\b((zeki)?tb.*\b) b/i],[s,[c,"Zeki"],[d,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],s,[d,g]],[/\b(ns-?\w{0,9}) b/i],[s,[c,"Insignia"],[d,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[s,[c,"NextBook"],[d,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],s,[d,h]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],s,[d,h]],[/\b(ph-1) /i],[s,[c,"Essential"],[d,h]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[s,[c,"Envizen"],[d,g]],[/\b(trio[-\w\. ]+) b/i],[s,[c,"MachSpeed"],[d,g]],[/\btu_(1491) b/i],[s,[c,"Rotor"],[d,g]],[/(shield[\w ]+) b/i],[s,[c,"Nvidia"],[d,g]],[/(sprint) (\w+)/i],[c,s,[d,h]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[c,ft],[d,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[c,bt],[d,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[c,bt],[d,h]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,s,[d,w]],[/droid.+; (shield) bui/i],[s,[c,"Nvidia"],[d,w]],[/(playstation [345portablevi]+)/i],[s,[c,ze],[d,w]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[s,[c,ft],[d,w]],[/smart-tv.+(samsung)/i],[c,[d,v]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[c,ht],[d,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,gt],[d,v]],[/(apple) ?tv/i],[c,[s,P+" TV"],[d,v]],[/crkey/i],[[s,pe+"cast"],[c,be],[d,v]],[/droid.+aft(\w)( bui|\))/i],[s,[c,O],[d,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[s,[c,Xt],[d,v]],[/(bravia[\w ]+)( bui|\))/i],[s,[c,ze],[d,v]],[/(mitv-\w{5}) bui/i],[s,[c,yt],[d,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[c,wt],[s,wt],[d,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,v]],[/((pebble))app/i],[c,s,[d,S]],[/droid.+; (glass) \d/i],[s,[c,be],[d,S]],[/droid.+; (wt63?0{2,3})\)/i],[s,[c,bt],[d,S]],[/(quest( 2)?)/i],[s,[c,Jt],[d,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[d,D]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[s,[d,h]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[s,[d,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,h]],[/(android[-\w\. ]{0,9});.+buil/i],[s,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[a,[p,mt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[a,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,a],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[a,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,a],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[a,vt,er]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[a,vt,er]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[a,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[a,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[a,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,a],[/\(bb(10);/i],[a,[p,ie]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[a,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[a,[p,ye+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[a,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[a,[p,pe+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],a],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,a],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],a],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,a]]},V=function(k,M){if(typeof k===u&&(M=k,k=e),!(this instanceof V))return new V(k,M).getResult();var C=k||(typeof t!==l&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:n),L=M?Qo(tr,M):tr;return this.getBrowser=function(){var T={};return T[p]=e,T[a]=e,Ae.call(T,C,L.browser),T.major=ei(T.version),T},this.getCPU=function(){var T={};return T[y]=e,Ae.call(T,C,L.cpu),T},this.getDevice=function(){var T={};return T[c]=e,T[s]=e,T[d]=e,Ae.call(T,C,L.device),T},this.getEngine=function(){var T={};return T[p]=e,T[a]=e,Ae.call(T,C,L.engine),T},this.getOS=function(){var T={};return T[p]=e,T[a]=e,Ae.call(T,C,L.os),T},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return C},this.setUA=function(T){return C=typeof T===m&&T.length>I?wt(T,I):T,this},this.setUA(C),this};V.VERSION=r,V.BROWSER=Ve([p,a,b]),V.CPU=Ve([y]),V.DEVICE=Ve([s,c,d,w,h,v,g,S,D]),V.ENGINE=V.OS=Ve([p,a]),typeof He!==l?(typeof pt!==l&&pt.exports&&(He=pt.exports=V),He.UAParser=V):i==="object"&&null.amd?null(function(){return V}):typeof t!==l&&(t.UAParser=V);var we=typeof t!==l&&(t.jQuery||t.Zepto);if(we&&!we.ua){var je=new V;we.ua=je.getResult(),we.ua.get=function(){return je.getUA()},we.ua.set=function(k){je.setUA(k);var M=je.getResult();for(var C in M)we.ua[C]=M[C]}}})(typeof window=="object"?window:He)});f();f();(function(){try{var t=typeof window<"u"||typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="2f552669-eeb8-4540-8ce6-7dea71d85ec6",t._sentryDebugIdIdentifier="sentry-dbid-2f552669-eeb8-4540-8ce6-7dea71d85ec6")}catch(r){}})();f();var Zo=U(z()),Xo=U(or());f();var nt=U(z());f();var E=U(z());f();if(typeof document<"u"){let t=document.createElement("style"),e=window.engagement,r=e&&e._configuration&&e._configuration.nonce;if(r)t.setAttribute("nonce",r);else{let n=document.querySelector("[nonce]");if(n){let o=n.nonce||n.getAttribute("nonce");o&&t.setAttribute("nonce",o)}}t.appendChild(document.createTextNode(`#engagement-wrapper *,
#engagement-wrapper *:before,
#engagement-wrapper *:after,
.engagement-nudge-modal *,
.engagement-nudge-modal *:before,
.engagement-nudge-modal *:after,
.engagement-nudge-modal-mock *,
.engagement-nudge-modal-mock *:before,
.engagement-nudge-modal-mock *:after {
  box-sizing: border-box;
}

.engagement-modal > .rc-dialog > .rc-dialog-content {
  background-color: transparent;
}

.engagement-tooltip {
  z-index: 2147483647 !important; /*make the tooltip the highest possible z index*/
}

/*** Hack: Hide this because it's less flexible (classnames can't be changes)
    Instead we only show its children, by translating its children ***/
.engagement-modal > .rc-dialog > .rc-dialog-content > .rc-dialog-header {
  max-height: 0px !important;
  padding: 0px !important;
}

.engagement-modal > .rc-dialog {
  left: 0px;
  transition: left 0.3s;
}

.engagement-modal > .rc-dialog > .rc-dialog-content > .rc-dialog-body {
  position: relative !important;
}

/* TestMode inline engagement */
.engagement-modal-inline.rc-dialog-wrap {
  position: relative;
  height: 100%;
}

#engagement-toast-container {
  inset: 16px;
  @media (max-width: 400px) {
    inset: 8px;
  }
}

#engagement-toast-responsive-inner-div {
  @media (max-width: 400px) {
    width: 100%;
  }
}


#engagement-container > div {
  height: 100%;
}

#engagement-home > .rc-dialog-root {
  height: 100%;
}

#engagement-wrapper .rc-header-guidance {
  background: rgba(174, 177, 221, 1) !important;
  filter: brightness(135%);
  border-radius: 2px 2px 0px 0px !important;
  border-bottom: 0px !important;
  padding: 8px 30px 2px 30px !important;
  margin: 0px 10px 0px 10px;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 3px 10px !important;
  font-weight: 400;
  text-align: center;
}

@keyframes fontbulger {
  0% {
    font-size: 10px;
  }
  30% {
    font-size: 15px;
  }
  100% {
    font-size: 12px;
  }
}

@keyframes shimmer {
  0% {
    background-position: top left;
  }
  100% {
    background-position: top right;
  }
}

.engagement-category-collapse {
  transform: scale(1, -1);
  transition: 0.3s ease-in;
  cursor: pointer;
}

.engagement-category-expand {
  transition: 0.3s ease-in;
  cursor: pointer;
}

/* Nudges - modal */

.engagement-nudge-modal {
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2147483644 !important;
}

.engagement-nudge-modal-mock {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 0;
  transition: margin-right cubic-bezier(0.78, 0.14, 0.15, 0.86) 0.3s;
  z-index: 2147483644 !important;
}

/* Nudges - media */

.engagement-help-doc-title::before {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, transparent 66.67%, gray 93.08%);
  content: '';
}

/* Recorder */
#engagement-recorder-mask {
  background: transparent;
}
`)),document.head.appendChild(t)}f();if(typeof document<"u"){let t=document.createElement("style"),e=window.engagement,r=e&&e._configuration&&e._configuration.nonce;if(r)t.setAttribute("nonce",r);else{let n=document.querySelector("[nonce]");if(n){let o=n.nonce||n.getAttribute("nonce");o&&t.setAttribute("nonce",o)}}t.appendChild(document.createTextNode(`/*** Guidance banner styling and animation ***/
@keyframes example {
  from {
    transform: translateY(0px);
  }
  to {
    transform: translateY(-30px);
  }
}

.rc-header-guidance {
  animation: example 0.5s;
  animation-fill-mode: forwards;
}

/*** engagement entry animation ***/
/*** We can't do exit animation because rc-dialog makes display: none ***/
@keyframes onEntry {
  0% {
    opacity: 0.3;
  }
  100% {
    opacity: 1;
  }
}

.engagement-opened {
  animation: onEntry 0.1s;
  animation-fill-mode: forwards;
}

@keyframes onSelect {
  0% {
    transform: translate3d(0px, 0px, 0px);
  }
  50% {
    transform: translate3d(0px, 0px, -0.5px);
  }
  100% {
    transform: translate3d(0px, 0px, 0px);
  }
}

.engagement-selected {
  animation: onSelect 0.4s;
}

@keyframes ScaleEntry {
  from {
    transform: scale(0.8);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.engagement-scale-entry-animation {
  animation: ScaleEntry 0.3s;
  animation-fill-mode: forwards;
}

@keyframes onEntry {
  0% {
    opacity: 0.3;
  }
  100% {
    opacity: 1;
  }
}

.engagement-shortcut-tooltip {
  opacity: 0;
  animation: tagEntry 0.2s;
  animation-delay: 0.5s;
  animation-fill-mode: forwards;
}

@keyframes tagExit {
  from {
    transform: scale(1);
    opacity: 1;
  }
  to {
    transform: scale(0.8);
    opacity: 0;
  }
}

.engagement-shortcut-tooltip-remove {
  animation: tagExit 0.2s;
  animation-fill-mode: forwards;
}

.engagement-shortcut-tooltip,
.engagement-shortcut-tooltip-remove {
  z-index: 99999999;
  position: absolute;
  padding: 8px 12px;
  background-color: rgba(0, 0, 0, 0.8);
  font-family: proxima-nova, sans-serif;
  color: rgba(255, 255, 255, 0.6);
  border-radius: 4px;
  font-size: 13px;
}

.engagement-shortcut-tooltip-tag {
  margin-left: 10px;
  padding: 2px 5px;
  border-radius: 2px;
  background-color: grey;
}

#engagement-launcher {
  animation: 0.25s ease-out scaleIn;
}

@keyframes scaleIn {
  0% {
    transform: scale(0.06);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes growFromBottom {
  0% {
    transform: scale(1, 0.3);
  }

  100% {
    transform: scale(1, 1);
  }
}
`)),document.head.appendChild(t)}f();var Ft=class{constructor(){F(this,"organization")}getOrganization(){return this.organization}setOrganization(e){this.organization=e}},$n=new Ft;f();var ii=function(e,r,n){for(var o=0,i=0;o=i,i=Ge(),o===38&&i===12&&(r[n]=1),!Ct(i);)kt();return br(e,xt)},si=function(e,r){var n=-1,o=44;do switch(Ct(o)){case 0:o===38&&Ge()===12&&(r[n]=1),e[n]+=ii(xt-1,r,n);break;case 2:e[n]+=Sr(o);break;case 4:if(o===44){e[++n]=Ge()===58?"&\f":"",r[n]=e[n].length;break}default:e[n]+=gr(o)}while(o=kt());return e},ai=function(e,r){return vr(si(wr(e),r))},Kn=new WeakMap,ci=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,n=e.parent,o=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!Kn.get(n))&&!o){Kn.set(e,!0);for(var i=[],l=ai(r,i),u=n.props,m=0,b=0;m<l.length;m++)for(var s=0;s<u.length;s++,b++)e.props[b]=i[m]?l[m].replace(/&\f/g,u[s]):u[s]+" "+l[m]}}},di=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function Hn(t,e){switch(fr(t,e)){case 5103:return A+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return A+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return A+t+Ne+t+H+t+t;case 6828:case 4268:return A+t+H+t+t;case 6165:return A+t+H+"flex-"+t+t;case 5187:return A+t+N(t,/(\w+).+(:[^]+)/,A+"box-$1$2"+H+"flex-$1$2")+t;case 5443:return A+t+H+"flex-item-"+N(t,/flex-|-self/,"")+t;case 4675:return A+t+H+"flex-line-pack"+N(t,/align-content|flex-|-self/,"")+t;case 5548:return A+t+H+N(t,"shrink","negative")+t;case 5292:return A+t+H+N(t,"basis","preferred-size")+t;case 6060:return A+"box-"+N(t,"-grow","")+A+t+H+N(t,"grow","positive")+t;case 4554:return A+N(t,/([^-])(transform)/g,"$1"+A+"$2")+t;case 6187:return N(N(N(t,/(zoom-|grab)/,A+"$1"),/(image-set)/,A+"$1"),t,"")+t;case 5495:case 3959:return N(t,/(image-set\([^]*)/,A+"$1$`$1");case 4968:return N(N(t,/(.+:)(flex-)?(.*)/,A+"box-pack:$3"+H+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+A+t+t;case 4095:case 3583:case 4068:case 2532:return N(t,/(.+)-inline(.+)/,A+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Et(t)-1-e>6)switch(se(t,e+1)){case 109:if(se(t,e+4)!==45)break;case 102:return N(t,/(.+:)(.+)-([^]+)/,"$1"+A+"$2-$3$1"+Ne+(se(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~St(t,"stretch")?Hn(N(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(se(t,e+1)!==115)break;case 6444:switch(se(t,Et(t)-3-(~St(t,"!important")&&10))){case 107:return N(t,":",":"+A)+t;case 101:return N(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+A+(se(t,14)===45?"inline-":"")+"box$3$1"+A+"$2$3$1"+H+"$2box$3")+t}break;case 5936:switch(se(t,e+11)){case 114:return A+t+H+N(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return A+t+H+N(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return A+t+H+N(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return A+t+H+t+t}return t}var li=function(e,r,n,o){if(e.length>-1&&!e.return)switch(e.type){case pr:e.return=Hn(e.value,e.length);break;case mr:return Pe([ve(e,{value:N(e.value,"@","@"+A)})],o);case ur:if(e.length)return yr(e.props,function(i){switch(hr(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Pe([ve(e,{props:[N(i,/:(read-\w+)/,":"+Ne+"$1")]})],o);case"::placeholder":return Pe([ve(e,{props:[N(i,/:(plac\w+)/,":"+A+"input-$1")]}),ve(e,{props:[N(i,/:(plac\w+)/,":"+Ne+"$1")]}),ve(e,{props:[N(i,/:(plac\w+)/,H+"input-$1")]})],o)}return""})}},ui=[li],Wn=function(e){var r=e.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(y){var w=y.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var o=e.stylisPlugins||ui,i={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),h=1;h<w.length;h++)i[w[h]]=!0;u.push(y)});var m,b=[ci,di];{var s,p=[xr,Cr(function(y){s.insert(y)})],d=kr(b.concat(o,p)),c=function(w){return Pe(Er(w),d)};m=function(w,h,g,v){s=g,c(w?w+"{"+h.styles+"}":h.styles),v&&(a.inserted[h.name]=!0)}}var a={key:r,sheet:new lr({key:r,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:m};return a.sheet.hydrate(u),a};f();var Ce=U(z()),pi=(t=document.body)=>{var o,i;let e=(0,Ce.useRef)(null),r=(0,Ce.useRef)(null),n=(0,Ce.useRef)(null);return(0,Ce.useEffect)(()=>()=>{var l,u;(l=r.current)==null||l.disconnect(),(u=e.current)==null||u.remove()},[]),(e.current===null||t!==n.current)&&((o=r.current)==null||o.disconnect(),(i=e.current)==null||i.remove(),n.current=t,e.current=document.createElement("div"),e.current.setAttribute("data-engagement-toplevel-styles",""),e.current.setAttribute("hidden",""),t.prepend(e.current),r.current=new MutationObserver(()=>{e.current&&e.current.querySelectorAll("style[data-emotion]:not([data-s])").forEach(l=>{l.setAttribute("data-s","")})}),r.current.observe(e.current,{childList:!0,subtree:!0})),e.current},zn=pi;f();var Fe=U(z());var mi=({nudgeActor:t})=>{var b;let e=$(),r=Ee(t,({context:s})=>s.nudge),n=Ee(t,({context:s})=>s.stepIndex),{animStyles:o}=Ue(),i=ge(r,n);if(!i||!(Ze(i)&&i.formFactor.isShowingMask))return null;let{targetElement:l}=gn(e,{step:i}),u=(b=l==null?void 0:l.getBoundingClientRect())!=null?b:new DOMRect,m=l?getComputedStyle(l).borderRadius:"0px";return u.width===0||u.height===0?null:Fe.default.createElement("div",{style:{position:"absolute",top:"0",left:"0",...Oe.getZIndexStyles(i,"mask")}},Fe.default.createElement("div",{"data-testid":"engagement-nudge-mask",style:{width:`${document.documentElement.scrollWidth}px`,height:`${document.documentElement.scrollHeight}px`,clipPath:`polygon(0% 0%, 0% 100%,
                ${u.left+window.scrollX}px 100%,
                ${u.left+window.scrollX}px ${u.top+window.scrollY}px,
                ${u.left+window.scrollX+u.width}px ${u.top+window.scrollY}px,
                ${u.left+window.scrollX+u.width}px ${u.top+window.scrollY+u.height}px,
                0% ${u.top+window.scrollY+u.height}px,
                0% 100%, 100% 100%, 100% 0%)`,position:"absolute"}}),Fe.default.createElement("div",{"data-testid":"engagement-nudge-mask-inner",style:{pointerEvents:"none",position:"absolute",inset:`${u.top+window.scrollY}px ${u.left+window.scrollX}px`,width:`${u.width}px`,height:`${u.height}px`,padding:"4px",borderRadius:`${m}`,boxShadow:`0 0 0 ${Math.max(document.documentElement.scrollHeight,document.documentElement.scrollWidth)}px rgba(0, 0, 0, 0.1)`,overflow:"hidden",opacity:o.opacity,transitionProperty:"opacity",transitionDuration:o.transitionDuration,transitionTimingFunction:o.transitionTimingFunction}}))},Vn=({nudgesManager:t})=>{let e=$(),r=Ee(t,o=>o.context.activeNudge);if(!r)return null;let n=Z(e,r==null?void 0:r.variantId);return n?Fe.default.createElement(mi,{nudgeActor:n}):null};f();var jn=t=>{if(t.themeOverride&&t.themeOverride.theme&&t.themeOverride.mode)return t.themeOverride;let e=t.themeMode==="auto"?t.services.getDefaultUIMode():t.themeMode;return{theme:Mr(t.themes),mode:e}};f();var ne=U(z()),et=U(z());var le={state:{},subscribers:[],subscribe:t=>(le.subscribers.push(t),()=>{le.subscribers=le.subscribers.filter(e=>e!==t)})},gi=(t,e)=>{switch(e.type){case"SHOW":return{...t,[e.id]:e.payload};case"HIDE":{let r={...t};return delete r[e.id],r}case"HIDE_ALL_MATCHING_PATTERN":if(e.idPattern){let r={...t};for(let n in r)n.match(e.idPattern)&&delete r[n];return r}return{};default:return t}},$t=t=>{let e=gi(le.state,t);le.state=e,le.subscribers.forEach(r=>r(e))},qn=(t,e)=>{$t({type:"SHOW",id:t,payload:e})},Gn=t=>{$t({type:"HIDE_ALL_MATCHING_PATTERN",idPattern:t})},Kt=t=>{let e=document.querySelector(`[data-spacer-for="${t}"]`);e&&e.remove(),$t({type:"HIDE",id:t})},Yn=({children:t})=>{let{isEditorPreview:e}=$(),[r,n]=(0,et.useState)(le.state);return(0,et.useEffect)(()=>le.subscribe(n),[]),ne.default.createElement(ne.default.Fragment,null,t,ne.default.createElement("div",{id:"engagement-nudges-banner-sticky-container",style:{width:"100%",top:"0px",left:0,position:"fixed",pointerEvents:"none",height:"100%"}},Object.entries(r).filter(([,o])=>o.sticky).map(([o,i])=>ne.default.createElement("div",{key:o,id:o},i.element))),ne.default.createElement("div",{id:"engagement-nudges-banner-inline-container-top",style:{width:"100%",position:"absolute",top:"0",left:0,pointerEvents:"none"}},Object.entries(r).filter(([,o])=>!o.sticky&&o.position==="top").map(([o,i])=>ne.default.createElement("div",{key:o,id:o},i.element))),ne.default.createElement("div",{id:"engagement-nudges-banner-inline-container-bottom",style:{width:"100%",position:e?void 0:"relative",pointerEvents:"none"}},Object.entries(r).filter(([,o])=>!o.sticky&&o.position==="bottom").map(([o,i])=>ne.default.createElement("div",{key:o,id:o},i.element))))};f();var Jn=U(oi()),he=U(z());f();var K=U(z());var fi=j.div`
  height: ${Bt}px;
  position: relative;
  z-index: 50;

  @media screen and (max-height: 820px) {
    transform: scale(0.9);
  }

  @media screen and (max-height: 720px) {
    transform: scale(0.8);
  }

  @media screen and (max-height: 620px) {
    transform: scale(0.7);
  }

  @media screen and (max-height: 560px) {
    transform: scale(0.6);
  }

  @media screen and (max-height: 500px) {
    transform: scale(0.5);
  }

  @media screen and (max-height: 420px) {
    transform: scale(0.4);
  }
`,hi=j.div`
  width: ${tn}px;
  height: ${Bt}px;
  position: relative;
  border-radius: 56px;
  box-shadow: 0px 0px 0px 7.5px #7d7e7d;
  border: 8px solid #000;
  background: linear-gradient(165deg, white, #ebf0ff 45%, #ebf0ff 55%, white);
  outline: 6px solid #2c2c2b;
  padding-top: 60px;
  padding-bottom: 34px;
  overflow: hidden;

  @media screen and (max-width: 670px) {
    height: 790px;
    width: 400px;
  }

  @media screen and (max-width: 580px) {
    height: 720px;
    width: 360px;
  }

  @media screen and (max-width: 480px) {
    height: 650px;
    width: 320px;
  }

  @media screen and (max-width: 400px) {
    height: 580px;
    width: 280px;
  }

  #engagement-nudge-container {
    overflow: auto;
  }
`,yi=j.div`
  height: 100%;
  width: 100%;
  position: relative;
`,bi=j.div`
  position: absolute;
  width: 100%;
  height: 60px;
  top: 0px;
  display: flex;
  justify-content: center;
  padding-top: 12px;
`,wi=j.div`
  height: 37px;
  width: 126px;
  border-radius: 24px;
  background-color: #000000;
  transition: height 0.5s cubic-bezier(0.075, 0.82, 0.165, 1), width 0.5s cubic-bezier(0.075, 0.82, 0.165, 1);

  &:hover {
    height: 45px;
    width: 145px;
  }
`,vi=j.div`
  position: absolute;
  width: 100%;
  height: 34px;
  bottom: 0px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding-bottom: 8px;
`,Si=j.div`
  height: 5px;
  width: 154px;
  border-radius: 24px;
  background-color: #000000;
`,Ei=j.div`
  position: absolute;
  height: 100%;
  width: 100%;
  top: 0px;
  bottom: 0px;
`,Zn=j.div`
  position: absolute;
  top: 120px;
  display: flex;
  flex-direction: column;

  &.left {
    left: -12px;
  }

  &.right {
    right: -12px;
    top: 220px;
  }
`,tt=j.span`
  background-color: #1d1e1f;
  display: inline-block;
  width: 5px;
  min-height: 62px;
  border-radius: 2px;

  &.power {
    height: 102px;
  }

  &.volume-up {
    margin-top: 29px;
  }
  &.volume-down {
    margin-top: 16px;
  }

  &.lock {
    min-height: 32px;
  }
`,xi=()=>K.default.createElement(Ei,null,K.default.createElement(Zn,{className:"left"},K.default.createElement(tt,{className:"lock"}),K.default.createElement(tt,{className:"volume-up"}),K.default.createElement(tt,{className:"volume-down"})),K.default.createElement(Zn,{className:"right"},K.default.createElement(tt,{className:"power"}))),ki=()=>K.default.createElement(bi,null,K.default.createElement(wi,null)),Xn=({style:t,children:e})=>{let{isMobileDevice:r,isMobileNativePreview:n}=de();return K.default.createElement(fi,{style:t,"data-testid":"mobile-preview-device"},K.default.createElement(xi,null),K.default.createElement(hi,{isMobileWeb:r&&!n},K.default.createElement(ki,null),K.default.createElement(yi,{id:"engagement-mobile-preview-wrapper"},K.default.createElement("div",{id:"engagement-mobile-nudge-mock-pin"}),e),K.default.createElement(vi,null,K.default.createElement(Si,null))))};var Ci=({children:t})=>{let e=he.default.useRef(null),{widgetTableauSelection:r,editorPreviewDevice:n,isAssistantPreview:o}=$(),{mode:i}=Q(),l=he.default.useCallback(b=>{if(!b){e.current&&(e.current.dispose(),e.current=null);return}if(e.current=(0,Jn.default)(b,{maxZoom:1,minZoom:1,initialZoom:1,zoomDoubleClickSpeed:1,smoothScroll:!1,filterKey:function(){return!0}}),e.current.on("pan",function(){document.body.style.cursor="grab",b.style.pointerEvents="none"}),e.current.on("panend",function(){document.body.style.cursor="auto",b.style.removeProperty("pointer-events")}),!!b.children[0])return b.addEventListener("mousedown",u),b.addEventListener("wheel",m),()=>{b.removeEventListener("mousedown",u),b.removeEventListener("wheel",m)}},[r]),u=b=>{var d,c;let s=b.target;(s==null?void 0:s.id)==="panzoom-container"?(d=e.current)==null||d.resume():(c=e.current)==null||c.pause()},m=b=>{var d,c;let s=b.target;(s==null?void 0:s.id)==="panzoom-container"?(d=e.current)==null||d.resume():(c=e.current)==null||c.pause()};return he.default.createElement("div",{style:{position:"absolute",inset:0,overflow:"clip",backgroundColor:o?"var(--monochrome-minus-4)":i==="lightMode"?"#F9F9F9":"#3F424A",backgroundImage:o?void 0:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABZSURBVHgB7dG7DYBADANQJxexAiXSTXw9uyExBih34SOxQhr83Li2ASIiIiIiIvo7QbLW1jms1zijq9puSDaGLxhhuBPaqyKZTFK+/q6AZOJlg8shqv5ccAGZWRnaKiSy9QAAAABJRU5ErkJggg==)"}},he.default.createElement("div",{id:"panzoom-container",style:{width:"100%",height:"100%"},ref:l},t,he.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},he.default.createElement(Xn,{style:{visibility:n.startsWith("mobile")?"visible":"hidden"}}))))},Qn=Ci;f();var _=U(z()),Ht=U(or());f();var Te=U(z());f();var eo=U(z());var Ti={display:"flex",width:"var(--popover-width)",flexDirection:"column",alignItems:"flex-start",pointerEvents:"all",maxWidth:"var(--tooltip-max-width)",position:"relative",borderRadius:"var(--layout-radius-card)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--border-primary)",background:"var(--background-primary)",boxShadow:"var(--layout-shadow) var(--layout-shadow-color)",a:{color:"var(--content-link)",textDecoration:"none","&:hover":{color:"var(--content-link-hover)",textDecoration:"underline"}}},Ii={minWidth:"var(--popover-width)",width:"unset",maxWidth:"unset"},_i=j.div``,Ai=eo.default.forwardRef(({children:t,title:e,variant:r,theme:n,...o},i)=>Ir(_i,{ref:i,css:[Ti,r==="survey"&&Ii].filter(Boolean),...o},t)),to=Ai;var ro=({nudge:t,step:e,renderMode:r,handleLinkClick:n,stepIndex:o,isVisible:i=!0})=>{var p;let l=$(),u=Q(),m=r!==1?Z(l,t.variantId):void 0,{isMobileDevice:b}=de(),s=Te.default.createElement(An,{isDismissible:t.isDismissible,shouldMoveLeft:((p=e.formFactor)==null?void 0:p.contentAlignment)==="end","data-testid":"engagement-nudge-tooltip-close"},Te.default.createElement(En,null));return Te.default.createElement(ae,{nudge:t},Te.default.createElement(to,{variant:e.content.find(d=>d.type==="survey_rating")?"survey":"default",key:e.id,theme:u,style:{minHeight:44,pointerEvents:i?"auto":"none",...e.formFactor.layout==="horizontal"&&!b?{width:"auto",maxWidth:"calc(var(--tooltip-max-width) * 2)"}:{}},className:"amplitude-engagement-tooltip-content"},Te.default.createElement(Bn,{nudge:t,step:e,renderMode:r,handleLinkClick:n,stepIndex:o,actor:m,overrides:{close:s}})))};f();var no=U(z());var Mi={bookClosed:hn,helpCircle:yn,helpSquare:bn,infoCircle:wn,lightBulb:vn,lightning:Sn},oo=({type:t,size:e=16})=>{let r=Mi[t];return no.default.createElement(r,{color:"#3F424A",width:e,height:e})};f();var rt=U(z());var io=dn({types:{},guards:{shouldCenter:()=>!1,isInlineAligned:()=>!1},actions:{updatePosition:Lt({marker:({context:t},e)=>({...t.marker,position:e.position})}),assignInlineWrapper:Lt({inlineWrapperElement:(t,e)=>e.inlineWrapperElement}),removeTooltip:()=>{},trackMarkerInView:()=>{},handleHide:()=>{}},actors:{waitForTargetElement:re(()=>{}),trackTargetElement:re(()=>{}),wrapTargetElement:re(()=>{}),trackMarkerInView:re(()=>{})}}).createMachine({id:"Tooltip",initial:"idle",context:({input:t})=>({marker:{ref:t.markerRef,position:null,offset:t.offset,alignment:t.alignment},renderMode:t.renderMode,anchor:t.anchor}),states:{idle:{always:[{target:"centered",guard:"shouldCenter",description:"This is the case when we are editing a step in the studio and the target element is unavailable."},"waiting for target element"]},centered:{type:"final"},anchoring:{initial:"hidden",invoke:{src:"trackTargetElement",id:"trackTargetElement",input:({context:t,event:e})=>({marker:t.marker,targetElement:"targetElement"in e?e.targetElement:null})},states:{shown:{on:{HIDE:{target:"#Tooltip.anchoring.hidden"}},states:{visible:{entry:[{type:"trackMarkerInView"}],on:{OUT_OF_VIEW:"hidden"},exit:[{type:"handleHide"}]},hidden:{on:{IN_VIEW:"visible"}}},initial:"hidden",invoke:{src:"trackMarkerInView",id:"trackMarkerInView",input:({context:t})=>({markerRef:t.marker.ref})}},hidden:{on:{SHOW:"shown"}}},on:{POSITION:{actions:[{type:"updatePosition",params:({event:t})=>({position:t.position})}]},TARGET_ELEMENT_REMOVED:"waiting for target element"}},inlining:{invoke:{src:"wrapTargetElement",id:"wrapTargetElement",input:({context:t,event:e})=>({marker:t.marker,targetElement:"targetElement"in e?e.targetElement:null})},states:{idle:{on:{ASSIGN_WRAPPER:{target:"inlined",actions:[{type:"assignInlineWrapper",params:({event:t})=>({inlineWrapperElement:t.inlineWrapperElement})}]}}},inlined:{states:{hidden:{on:{IN_VIEW:"visible"}},visible:{entry:[{type:"trackMarkerInView"}],on:{OUT_OF_VIEW:"hidden"}}},initial:"hidden",invoke:{src:"trackMarkerInView",id:"trackMarkerInView",input:({context:t})=>({markerRef:t.marker.ref})}}},initial:"idle",on:{TARGET_ELEMENT_REMOVED:"waiting for target element"}},"waiting for target element":{on:{TARGET_ELEMENT_FOUND:[{target:"inlining",guard:"isInlineAligned"},"anchoring"]},invoke:{src:"waitForTargetElement",id:"waitForTargetElement"}}},on:{DESTROY:{actions:[{type:"removeTooltip"}]}}}),W=ln(io),so=({variantId:t,children:e,renderMode:r,offset:n,alignment:o,anchor:i,handleDestroy:l,onMarkerView:u,handleHide:m})=>{let{isEditorPreview:b}=$(),{showWidgetTableau:s,messageBus:p}=$(),d=(0,rt.useRef)(null),c=io.provide({guards:{shouldCenter:({context:a})=>!s&&b||r===1&&!xe(a.anchor),isInlineAligned:()=>o==="inline_left"||o==="inline_right"},actions:{removeTooltip:l,trackMarkerInView:u,handleHide:m},actors:{waitForTargetElement:re(({sendBack:a})=>{let y=xe(i);if(Le(y))return a({type:"TARGET_ELEMENT_FOUND",targetElement:y});let w=()=>{let h=xe(i);Le(h)&&a({type:"TARGET_ELEMENT_FOUND",targetElement:h})};return p.subscribe("dom_mutation",w,`tooltip_wait_for_target_${t}`),()=>{p.unsubscribe("dom_mutation",`tooltip_wait_for_target_${t}`)}}),trackTargetElement:re(({sendBack:a,input:y})=>{let{marker:w,targetElement:h}=y;if(!h)return;let g=w.ref.current;if(!g)return;let{offset:v,alignment:S}=w,I=xn(h,g,()=>{var O,P,q,ie,Y,pe;Tn(h,g,{placement:S==="left"?"left":"right",strategy:"fixed",middleware:[kn({mainAxis:G(v.x),crossAxis:G(v.y)}),Cn({strategy:"escaped",padding:{top:G((O=v==null?void 0:v.y)!=null?O:"0"),bottom:-G((P=v==null?void 0:v.y)!=null?P:"0"),...S==="left"?{right:-G((q=v==null?void 0:v.x)!=null?q:"0"),left:G((ie=v==null?void 0:v.x)!=null?ie:"0")}:{right:G((Y=v==null?void 0:v.x)!=null?Y:"0"),left:-G((pe=v==null?void 0:v.x)!=null?pe:"0")}}})]}).then(({y:mt,x:ye,middlewareData:be})=>{var Ie;a({type:"POSITION",position:{x:ye,y:mt}}),(Ie=be.hide)!=null&&Ie.escaped?a({type:"HIDE"}):a({type:"SHOW"})})});return p.subscribe("dom_mutation",()=>{(!document.contains(h)||!Le(h))&&a({type:"TARGET_ELEMENT_REMOVED"})},`tooltip_check_for_target_removal_${t}`),()=>{I(),p.unsubscribe("dom_mutation",`tooltip_check_for_target_removal_${t}`)}}),wrapTargetElement:re(({sendBack:a,input:y})=>{var v,S;let{marker:w,targetElement:h}=y;if(!h)return;let g=document.createElement("div");return g.setAttribute("data-testid","engagement-nudge-tooltip-wrapper"),g.style.position="relative",g.style.display="inline-flex",g.style.alignItems="baseline",g.style.width="fit-content",g.style.flexDirection=w.alignment==="inline_right"?"row":"row-reverse",(v=h.parentNode)==null||v.insertBefore(g,h),(S=h.parentNode)==null||S.removeChild(h),g.appendChild(h),a({type:"ASSIGN_WRAPPER",inlineWrapperElement:g}),p.subscribe("dom_mutation",()=>{(!document.contains(h)||!Le(h))&&a({type:"TARGET_ELEMENT_REMOVED"})},`tooltip_check_for_target_removal_wrap_${t}`),()=>{let D=g.parentNode;document.contains(D)&&(D==null||D.insertBefore(h,g),D==null||D.removeChild(g)),p.unsubscribe("dom_mutation",`tooltip_check_for_target_removal_wrap_${t}`)}}),trackMarkerInView:re(({sendBack:a,input:y})=>{let w=new IntersectionObserver(([h])=>{h.isIntersecting?a({type:"IN_VIEW"}):a({type:"OUT_OF_VIEW"})});return y.markerRef.current&&w.observe(y.markerRef.current),()=>{w.disconnect()}})}});return rt.default.createElement(W.Provider,{logic:c,options:{input:{markerRef:d,offset:n,alignment:o,renderMode:r,anchor:i}}},e)};var Ni=({source:t,width:e})=>{let r=t.startsWith("<svg"),n=(0,_.useRef)(null),o={pointerEvents:"auto",...e!=null&&{width:e,height:e}},i={width:e!=null?"100%":"auto",height:e!=null?"100%":"auto",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"};return(0,_.useEffect)(()=>{if(r&&n.current){let l=n.current.querySelector("svg");l&&(e!=null?(l.style.width="100%",l.style.height="100%",l.style.maxWidth="100%",l.style.maxHeight="100%"):(l.style.width="auto",l.style.height="auto",l.style.maxWidth="none",l.style.maxHeight="none"))}},[r,t,e]),_.default.createElement("div",{style:o,className:"amplitude-engagement-tooltip-marker__image"},r?_.default.createElement("div",{ref:n,dangerouslySetInnerHTML:{__html:t},style:i,className:"svg-wrapper"}):_.default.createElement("img",{alt:"Tooltip marker",src:t,style:{width:e!=null?"100%":"auto",height:e!=null?"100%":"auto",objectFit:"contain"}}))},Pi=({type:t,width:e})=>_.default.createElement("div",{className:"amplitude-engagement-tooltip-marker__icon","data-testid":"engagement-nudge-tooltip-icon",style:{border:"none",display:"flex",background:"none",padding:0,position:"relative",pointerEvents:"auto"}},_.default.createElement(oo,{type:t,size:e!=null?e:void 0})),Oi=({marker:t,className:e})=>{let r=Q(),{isMobileNativePreview:n}=de();switch(t.type){case"image":return t.source?_.default.createElement(Ni,{source:t.source,width:n?16:t.width}):null;case"icon":return _.default.createElement(Pi,{type:t.icon,width:t.width});case"beacon":return _.default.createElement(Pn,{theme:r,className:"amplitude-engagement-tooltip-marker__beacon"});default:return null}},Ri=({step:t})=>{let{isMobileDevice:e}=de(),r=W.useSelector(a=>a.matches({anchoring:"shown"})||a.matches("centered")),n=W.useSelector(({context:a})=>a.marker.alignment),o=n==="inline_left"||n==="left",i={visibility:r?"visible":"hidden",top:"calc(40vh - 51px)",right:`calc(-${e?o?40:60:o?20:80}vw + 24px)`},l=W.useSelector(({context:a})=>{var y;return(y=a.marker.position)==null?void 0:y.y}),u=W.useSelector(({context:a})=>{var y;return(y=a.marker.position)==null?void 0:y.x}),m={visibility:r?"visible":"hidden",left:u,top:l},b={visibility:"visible"},s=W.useSelector(a=>a.matches({inlining:"inlined"})&&!!a.context.inlineWrapperElement),p=W.useSelector(a=>a.matches("centered")),d=()=>s?b:p?i:m,c=W.useSelector(({context:a})=>a.marker.ref);return _.default.createElement(In,{ref:c,"data-testid":"engagement-nudge-tooltip-marker",style:{...d()}},_.default.createElement(Oi,{marker:t.formFactor.marker,className:"amplitude-engagement-tooltip-marker"}))},Bi=({nudge:t,step:e,popoverActor:r})=>{var c,a,y;let n=Ee(r,w=>w.matches({visibility:"open"})),{onExit:o}=Ue(),{isStudioMobilePreview:i}=de(),l=$(),u=W.useSelector(({context:w})=>w.renderMode),m=u!==1?Z(l,t.variantId):void 0,b=(a=(c=m==null?void 0:m.getSnapshot())==null?void 0:c.context.stepIndex)!=null?a:0,s=(0,_.useCallback)(()=>o(()=>{var w,h;return(h=(w=m==null?void 0:m.getSnapshot())==null?void 0:w.context.popoverActor)==null?void 0:h.send({type:"CLOSE"})}),[m==null?void 0:m.getSnapshot,o]),p=On(w=>Re.nudge.engaged(t,b,{...m==null?void 0:m.getSnapshot().context,source:{type:"link",url:w},interactionState:te(l,t.variantId)}),s),d=W.useSelector(w=>w.matches({inlining:"inlined"})&&!!w.context.inlineWrapperElement);return(0,_.useEffect)(()=>{m==null||m.send({type:"ASSIGN_POPOVER_ACTOR",actor:r})},[r,m]),(0,_.useEffect)(()=>{u===1&&r.send({type:"OPEN"})},[u,e]),_.default.createElement(_.default.Fragment,null,_.default.createElement(Ri,{step:e}),_.default.createElement(_n,{"data-testid":"engagement-nudge-tooltip-content",describedBy:"engagement-nudge-tooltip-content",labelledBy:"engagement-nudge-title",portalToId:i?"engagement-mobile-preview-wrapper":d?"engagement-toast-container":void 0,shouldStealFocus:u!==1,showArrow:((y=e.formFactor.pointer)==null?void 0:y.type)==="arrow",style:{borderRadius:"var(--layout-radius-card)",...Oe.getZIndexStyles(e)}},_.default.createElement(Rn,{actor:m,step:e},_.default.createElement(Nn,null,_.default.createElement(ro,{nudge:t,step:e,renderMode:u,stepIndex:b,handleLinkClick:p,isVisible:n})))))},Di=({nudge:t,step:e,onOpen:r,forceOpen:n=!1,autoPlacement:o=!0,root:i})=>{let l=W.useSelector(({context:g})=>g.renderMode),u=W.useSelector(g=>g.matches("idle")),m=W.useSelector(g=>g.matches({inlining:"inlined"})&&!!g.context.inlineWrapperElement),b=W.useSelector(({context:g})=>g.inlineWrapperElement),s=W.useSelector(({context:g})=>g.marker.offset),{generatedCSSClassname:p}=Q(),{onEnter:d,onExit:c}=Ue();if(u)return null;let[a,y]=[G(s.x),G(s.y)],w=m?{display:"flex",position:"relative",[e.formFactor.marker.positioning.position==="inline_left"?"marginRight":"marginLeft"]:`${a}px`,marginTop:`${y}px`,zIndex:"auto"}:{...Oe.getZIndexStyles(e)};if(!i)return null;let h=(0,Ht.createPortal)(_.default.createElement(Mn,{"data-testid":`engagement-tooltip-${t.variantId}-${String(e.id)}${l===1?"-mock":""}`,forceOpen:n,defaultOpen:l===1,triggerType:e.formFactor.showOn,style:w,className:p,autoPlacement:o,onOpen:()=>{d(),r==null||r()},onClose:()=>{c()}},g=>_.default.createElement(Bi,{nudge:t,step:e,popoverActor:g})),i);return m&&b?(0,Ht.createPortal)(h,b):h},ao=({nudge:t,step:e,renderMode:r,forceOpen:n,anchorOverride:o,onMarkerView:i,onOpen:l,handleDestroy:u,autoPlacement:m})=>{var p;let b=$(),s=(0,_.useRef)(document.getElementById("engagement-tooltip-container-portal"));return s.current?_.default.createElement(ae,{nudge:t},_.default.createElement(fn,{widget:"tooltip",keepMounted:!0,isOpenByDefault:r===1},_.default.createElement(so,{variantId:t.variantId,offset:e.formFactor.marker.positioning.offset,renderMode:r,alignment:e.formFactor.marker.positioning.position,anchor:(p=o!=null?o:e.formFactor.anchorSelector)!=null?p:e.formFactor.anchor,handleDestroy:u,onMarkerView:i,handleHide:()=>{var a;let d=Z(b,t.variantId),c=(a=d==null?void 0:d.getSnapshot())==null?void 0:a.context.popoverActor;c==null||c.send({type:"CLOSE"})}},_.default.createElement(Di,{onOpen:l,autoPlacement:m,forceOpen:n,nudge:t,step:e,root:s.current})))):null};var Ui=E.default.lazy(()=>import("./c6412691f3ede94650c4c4fe085d625df3a546c5-Checklist-CRRF7GFM.js")),Fi=E.default.lazy(()=>import("./c6412691f3ede94650c4c4fe085d625df3a546c5-Nudges-ZMH7SPA2.js")),$i=E.default.lazy(()=>import("./c6412691f3ede94650c4c4fe085d625df3a546c5-WidgetTableau-XWXHY5TT.js")),Ki=E.default.lazy(()=>import("./c6412691f3ede94650c4c4fe085d625df3a546c5-ResourceCenterRoot-D3Z4OTTV.js")),Hi=()=>{let t=$(),{generatedCSSClassname:e}=Q(),r=()=>E.default.createElement(E.default.Fragment,null,E.default.createElement(E.Suspense,{fallback:null},E.default.createElement(Fi,null)),t.nudgesManager&&E.default.createElement(Vn,{nudgesManager:t.nudgesManager}),E.default.createElement(cn,{containerStyle:{marginTop:t.isEditorPreview?"51px":void 0}}),E.default.createElement("div",{id:"engagement-tooltip-container-portal"}),E.default.createElement(Yn,null)),n=()=>E.default.createElement(E.Suspense,{fallback:null},E.default.createElement(Ui,null)),o=i=>{var l,u;return t.resourceCenter?E.default.createElement(E.Suspense,{fallback:null},E.default.createElement(Ki,{isEnabled:!!t.resourceCenter.key&&!!((u=(l=t.decide)==null?void 0:l[t.resourceCenter.key])!=null&&u.value),isPreviewPane:i,isVisible:t.resourceCenter.visible,launcher:t.resourceCenter.desktopLauncher})):null};return E.default.createElement("div",{className:e,id:"engagement-theme-root",dir:"ltr"},t.showWidgetTableau?E.default.createElement(E.Suspense,{fallback:null},E.default.createElement($i,null)):t.isEditorPreview?E.default.createElement(Qn,null,n(),r(),o(!0)):E.default.createElement(E.default.Fragment,null,n(),r(),o(!1)))},Wi=({children:t})=>{var m,b,s,p,d,c;let e=$(),{organization:r}=e,n=(0,E.useRef)(!!e.user),o=document.getElementById("engagement-wrapper"),i=zn(o!=null?o:document.head),l=(0,E.useMemo)(()=>{var w,h;let a=me(),y=g=>{if(g.type!=="rule")return;let v="#engagement-wrapper";Array.isArray(g.props)?g.props=g.props.map(S=>S&&S.includes(".")?`${v} ${S}`:S):typeof g.props=="string"&&g.props.includes(".")&&(g.props=`${v} ${g.props}`)};return Wn({key:"engagement-toplevel",container:i,speedy:!((w=e.flags)!=null&&w["support-ruby-on-rails"]),nonce:(h=a[B])==null?void 0:h.nonce,stylisPlugins:[y]})},[i,(m=e.flags)==null?void 0:m["support-ruby-on-rails"]]);(0,E.useEffect)(()=>{$n.setOrganization(r)},[r]),E.default.useEffect(()=>{e.user&&(e.services.postMessageToDashboard("ENGAGEMENT_BOOTED"),n.current||(n.current=!0))},[(b=e.user)==null?void 0:b.device_id,(s=e.user)==null?void 0:s.user_id,r]),E.default.useEffect(()=>{let a=setTimeout(()=>{n.current||x.warn("\u{1F44B} Guides and Surveys are almost ready. You just need to call `boot()` to make them available in your app.")},15e3);return()=>clearTimeout(a)},[]);let u=(c=(p=e.user)==null?void 0:p.user_id)!=null?c:(d=e.user)==null?void 0:d.device_id;return E.default.createElement(E.default.Fragment,null,E.default.createElement(Tr,{value:l},u?E.default.createElement(Hi,{key:u}):null,t))},zi=t=>{let e=$(),r=jn(e),n={container:document.getElementById("engagement-container"),root:document};return E.default.createElement(Ar.Provider,{value:n},E.default.createElement(Nr,{theme:r.theme,mode:r.mode},E.default.createElement(Wi,{...t})))},co=zi;var lo=t=>nt.default.createElement(cr,null,nt.default.createElement(dr,{store:t.store},nt.default.createElement(co,null,t.children)));f();f();var ot=(t,e)=>{let r={};return Object.keys(e).forEach(n=>{r[n]=e[n].bind(null,t)}),r};var Wt={};ni(Wt,{previewAutopilotKeywords:()=>go,previewContentItem:()=>fo,previewRecSet:()=>po,previewResourceCenter:()=>mo,setCurrentChatSession:()=>yo,setInitialPage:()=>ho,showResourceCenter:()=>uo});f();f();var uo=(t,e)=>{t.services.showResourceCenter(t,e)},po=(t,e)=>{t.services.previewRecSet(t,e)},mo=(t,e,r)=>{t.services.previewResourceCenter(t,e,r)},go=(t,e)=>{t.services.previewAutopilotKeywords(t,e)},fo=(t,e)=>{t.services.setCurrentContentId(t,e)},ho=(t,e)=>{t.resourceCenter.initialPage=e},yo=(t,e,r,n=!1)=>{t.resourceCenter.currentChatSession={sessionId:e,messages:r,isReviewMode:n}};f();var Vi=t=>{var e,r,n,o;return typeof window>"u"||typeof document>"u"?t:{...t,event_properties:{...t.event_properties,"[Guides-Surveys] Page":{domain:(e=window.location)==null?void 0:e.hostname,hash:(r=window.location)==null?void 0:r.hash,path:(n=window.location)==null?void 0:n.pathname,query:(o=window.location)==null?void 0:o.search,title:document.title}}}},ji=t=>({...t,event_properties:{...t.event_properties,"[Guides-Surveys] Version":"1"}}),qi=t=>(t=ji(t),t=Vi(t),t),it=class{constructor(e){F(this,"hasBooted",!1);F(this,"integrations");this.integrations=e}trackEvent(e,r={}){this.track(e,r)}track(e,r={}){var o,i;let n={event_type:e,event_properties:r};if(!this.hasBooted){x.warn("Events cannot be tracked before `boot` is called");return}try{let l=qi(n);x.debug("Tracking event",JSON.stringify(l,null,2));try{this.integrations().forEach(u=>{var m;(m=u.track)==null||m.call(u,{event_type:l.event_type,event_properties:l.event_properties})})}catch(u){(o=ee())==null||o.captureException(u)}}catch(l){x.error("Unexpected error logging event; ignoring",{error:l}),(i=ee())==null||i.captureException(l)}}setBootStatus(e){this.hasBooted=e}};f();var Gi=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:Yi(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),Yi=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},Zi=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(r){e(r)}),this.queue=[])},t}(),ue=function(){return ue=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ue.apply(this,arguments)};function st(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bo(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],l;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){l={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return i}var at=function(t,e){var r,n,o=["string","number","boolean","undefined"],i=typeof t,l=typeof e;if(i!==l)return!1;try{for(var u=st(o),m=u.next();!m.done;m=u.next()){var b=m.value;if(b===i)return t===e}}catch(w){r={error:w}}finally{try{m&&!m.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var s=Array.isArray(t),p=Array.isArray(e);if(s!==p)return!1;if(s&&p){for(var d=0;d<t.length;d++)if(!at(t[d],e[d]))return!1}else{var c=Object.keys(t).sort(),a=Object.keys(e).sort();if(!at(c,a))return!1;var y=!0;return Object.keys(t).forEach(function(w){at(t[w],e[w])||(y=!1)}),y}return!0},Xi="$set",Ji="$unset",Qi="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),r=e.length,n=new Array(r);r--;)n[r]=[e[r],t[e[r]]];return n});var es=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,r=ue({},this.identity.userProperties),n=ue(ue({},this.identity),{userProperties:r});return{setUserId:function(o){return n.userId=o,this},setDeviceId:function(o){return n.deviceId=o,this},setUserProperties:function(o){return n.userProperties=o,this},setOptOut:function(o){return n.optOut=o,this},updateUserProperties:function(o){var i,l,u,m,b,s,p=n.userProperties||{};try{for(var d=st(Object.entries(o)),c=d.next();!c.done;c=d.next()){var a=bo(c.value,2),y=a[0],w=a[1];switch(y){case Xi:try{for(var h=(u=void 0,st(Object.entries(w))),g=h.next();!g.done;g=h.next()){var v=bo(g.value,2),S=v[0],D=v[1];p[S]=D}}catch(P){u={error:P}}finally{try{g&&!g.done&&(m=h.return)&&m.call(h)}finally{if(u)throw u.error}}break;case Ji:try{for(var I=(b=void 0,st(Object.keys(w))),O=I.next();!O.done;O=I.next()){var S=O.value;delete p[S]}}catch(P){b={error:P}}finally{try{O&&!O.done&&(s=I.return)&&s.call(I)}finally{if(b)throw b.error}}break;case Qi:p={};break}}}catch(P){i={error:P}}finally{try{c&&!c.done&&(l=d.return)&&l.call(d)}finally{if(i)throw i.error}}return n.userProperties=p,this},commit:function(){return e.setIdentity(n),this}}},t.prototype.getIdentity=function(){return ue({},this.identity)},t.prototype.setIdentity=function(e){var r=ue({},this.identity);this.identity=ue({},e),at(r,this.identity)||this.listeners.forEach(function(n){n(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:self,ct=function(){function t(){this.identityStore=new es,this.eventBridge=new Zi,this.applicationContextProvider=new Gi}return t.getInstance=function(e){return Ke.analyticsConnectorInstances||(Ke.analyticsConnectorInstances={}),Ke.analyticsConnectorInstances[e]||(Ke.analyticsConnectorInstances[e]=new t),Ke.analyticsConnectorInstances[e]},t}();f();var dt=["boot"],wo=["boot"],zt="$default_instance";function vo(t){var o,i,l,u,m,b,s,p,d;let e=window.engagement,r={_q:(o=e==null?void 0:e._q)!=null?o:[],_configuration:{apiKey:(l=(i=e==null?void 0:e._configuration)==null?void 0:i.apiKey)!=null?l:"",serverUrl:(u=e==null?void 0:e._configuration)==null?void 0:u.serverUrl,chatUrl:(m=e==null?void 0:e._configuration)==null?void 0:m.chatUrl,mediaUrl:(b=e==null?void 0:e._configuration)==null?void 0:b.mediaUrl,serverZone:(p=(s=e==null?void 0:e._configuration)==null?void 0:s.serverZone)!=null?p:"US",options:{...(d=e==null?void 0:e._configuration)==null?void 0:d.options}},_sentry:void 0,init(c,a){var v,S,D;if(r._configuration.apiKey){console.log("Engagement SDK has already been initialized. Ignoring additional init call.");return}r._configuration={...r._configuration,...a,apiKey:c,options:{splitting:!0,...r._configuration.options,...a==null?void 0:a.options}},(S=(v=r._configuration)==null?void 0:v.options)!=null&&S.logger&&r._configuration.options.logger.enable((D=r._configuration.options.logLevel)!=null?D:2);let y;if(a!=null&&a.cdnUrl)r._configuration.options.splitting?y=`${a.cdnUrl}/engagement-browser/prod/split/index.js`:y=a.cdnUrl+"/engagement-browser/prod/index.min.js.gz";else{let I=r._configuration.serverZone==="EU"?"https://cdn.eu.amplitude.com":"https://cdn.amplitude.com";r._configuration.options.splitting?y=`${I}/engagement-browser/prod/split/index.js`:y=`${I}/engagement-browser/prod/index.min.js.gz`}let w=null,h=()=>{if(w&&(clearTimeout(w),w=null),r._q&&r._q.length>0)for(console.warn(`Engagement SDK failed to load within ${g}ms. Resolving pending calls gracefully.`);r._q.length>0;){let I=r._q.shift();if(!I)continue;let O=I[0];if(dt.includes(O)&&I[1]instanceof Function&&I[2]instanceof Function){let P=I[1];console.warn(`Engagement SDK method '${O}' resolved as no-op due to script loading failure`),P(void 0)}}};t(y,r._configuration.options.splitting?"module":void 0,a==null?void 0:a.nonce,h);let g=1e4;w=setTimeout(()=>{h()},g)},plugin(c){let a=r.init;return{name:"@amplitude/engagement-browser",type:"enrichment",async setup(y,w){var S,D;let h=(S=y.instanceName)!=null?S:zt,g=ct.getInstance(h).identityStore;a(y.apiKey,{serverZone:y.serverZone,serverUrl:(D=y.serverUrl)!=null&&D.includes("amplitude.com")?void 0:y.serverUrl,...c,options:{logLevel:y.logLevel,logger:y.loggerProvider,...c==null?void 0:c.options}});let v=[{track:I=>{w.track(I)}}];await window.engagement.boot({user:()=>{let I=g.getIdentity();return{user_id:w.getUserId(),device_id:w.getDeviceId(),user_properties:I.userProperties,getSessionId:w.getSessionId}},integrations:v}),g.addIdentityListener(I=>{var O,P,q,ie;(((P=(O=window.engagement)==null?void 0:O._.user)==null?void 0:P.user_id)!==I.userId||((ie=(q=window.engagement)==null?void 0:q._.user)==null?void 0:ie.device_id)!==I.deviceId)&&window.engagement.boot({user:()=>{let Y=g.getIdentity();return{user_id:w.getUserId(),device_id:w.getDeviceId(),user_properties:Y.userProperties,getSessionId:w.getSessionId}},integrations:v}),window.engagement._setUserProperties(I.userProperties)})},async execute(y){return window.engagement.forwardEvent(y),y}}}},n=r;return new Proxy(r,{get:function(c,a){if(a in n)return n[a];if(a!=="then")return a==="gs"||a==="rc"?new Proxy({},{get:function(y,w){return function(){let h=Array.from(arguments),g=`${a}.${w}`;h.unshift(g),r._q.push(h)}}}):dt.includes(a)?function(){let y=Array.prototype.slice.call(arguments);return new Promise((w,h)=>{y.unshift(a,w,h),r._q.push(y)})}:function(){let y=Array.prototype.slice.call(arguments);y.unshift(a),r._q.push(y)}}})}var ts=["reloadOrganization","reloadNudges","reloadThemes"],rs={},lt=class{constructor(e,r){F(this,"_");F(this,"nudgeActions");F(this,"resourceCenterActions");F(this,"globalActions");F(this,"_analytics",new it(()=>this._.integrations));F(this,"_configuration",{serverZone:"US",serverUrl:void 0,mediaUrl:void 0,apiKey:"",options:{...rs}});F(this,"_initStarted",!1);F(this,"_isProxy",!1);F(this,"_fingerprint");F(this,"_sentry");F(this,"transformForHeadless",e=>e.map(r=>{var o,i,l,u,m,b,s,p,d,c,a;let n=JSON.parse(JSON.stringify(r));return(o=n.lifecycleConfig)!=null&&o.conditions&&delete n.lifecycleConfig.conditions,(i=n.pageTargeting)!=null&&i.conditions&&delete n.pageTargeting.conditions,(l=n.temporarilyHideTargeting)!=null&&l.conditions&&delete n.temporarilyHideTargeting.conditions,(m=(u=n.lifeCycleState)==null?void 0:u.checks)!=null&&m.sessionProperties&&delete n.lifeCycleState.checks.sessionProperties,(c=(d=(p=(s=(b=n.lifeCycleState)==null?void 0:b.checks)==null?void 0:s.limits)==null?void 0:p.detail)==null?void 0:d.limits)!=null&&c.conditions&&delete n.lifeCycleState.checks.limits.detail.limits.conditions,((a=n.lifeCycleState)==null?void 0:a.willRenderIfTriggered)!==void 0&&(n.lifeCycleState.passesAllChecks=n.lifeCycleState.willRenderIfTriggered,delete n.lifeCycleState.willRenderIfTriggered),n}));F(this,"gs",{reset:(e,r)=>{let n=Nt(this._,e);if(!n){x.warn(`gs.reset: Guide or survey with flagKey: ${e} not found`);return}this.nudgeActions.resetNudge(n==null?void 0:n.variantId,{step:r})},getAllGuidesAndSurveys:(e,r=[])=>{var i;let n=ce(this._);if(!n)return[];let o=[];for(let l of n.values()){let u=l.getSnapshot().context.nudge,m=te(this._,u.variantId),b=l.getSnapshot().matches({Step:"Render Loop"}),s=!!(m!=null&&m.activelifeCycleUuid),p=Xr(this._,u,r),d={activelifeCycleUuid:(m==null?void 0:m.activelifeCycleUuid)||"",currentStep:(m==null?void 0:m.currentStep)||0,isCompleted:(m==null?void 0:m.isCompleted)||!1,isDismissed:(m==null?void 0:m.isDismissed)||!1,isChecklistExpanded:(i=m==null?void 0:m.isChecklistExpanded)!=null?i:!0,steps:(m==null?void 0:m.steps)||{},shouldShow:b||s,checks:(p==null?void 0:p.checks)||{},willRenderIfTriggered:(p==null?void 0:p.willRenderIfTriggered)||!1};e!=null&&e.onlyEligible&&!d.willRenderIfTriggered||e!=null&&e.variantIds&&!e.variantIds.includes(u.variantId)||o.push({...u,lifeCycleState:d})}return this.transformForHeadless(o)},getPreviewGuideOrSurvey:async e=>{var i,l;let r=(i=me())==null?void 0:i[B],n=await qr(r==null?void 0:r.apiKey);n!=null&&n.nudges&&await((l=me())==null?void 0:l._reloadNudges(n));let o=this.gs.getAllGuidesAndSurveys({variantIds:[e]},["userTargeting"])[0];return o.lifeCycleState.checks.userTargeting={result:"PASS",explanation:"User targeting always passes in preview mode",detail:{userTargeting:o.flagKey}},o.lifeCycleState.willRenderIfTriggered=Object.values(o.lifeCycleState.checks).every(({result:u})=>u==="PASS"),o},list:()=>{let e=[],r=ce(this._);if(!r)return e;for(let n of r.values()){let o=n.getSnapshot().context.nudge,i=te(this._,o.variantId),l=n.getSnapshot().matches({Step:"Render Loop"});!(i!=null&&i.activelifeCycleUuid)&&!l||e.push({id:o.variantId,step:i==null?void 0:i.currentStep,title:o.title,status:l?"visible":"active",key:o.flagKey})}return e},show:(e,r=0)=>{let n=Nt(this._,e);n?(this.nudgeActions.closeAllNudgeMocks(),this.nudgeActions.forceTriggerSingleNudge(n,{source:{type:"sdk"},overrides:{stepIndex:r}})):x.error(`triggerNudge: Nudge with key: ${e} not found`)},closeAll:()=>{var e;(e=ce(this._))==null||e.forEach(r=>{r==null||r.send({type:"DISMISS"})})}});F(this,"rc",{open:()=>{this.resourceCenterActions.showResourceCenter(!0)},close:()=>{this.resourceCenterActions.showResourceCenter(!1)},toggle:()=>{this.resourceCenterActions.showResourceCenter(!this._.resourceCenter.visible)}});var n,o;this._=e,this.nudgeActions=ot(e,Xe),this.resourceCenterActions=ot(e,Wt),this.globalActions=ot(e,Vr),this.setRouter=this.setRouter.bind(this),this.boot=this.boot.bind(this),this._startNudgeDebug=this._startNudgeDebug.bind(this),this.forwardEvent=this.forwardEvent.bind(this),this.addIntegration=this.addIntegration.bind(this),this.setThemeMode=this.setThemeMode.bind(this),this.addCallback=this.addCallback.bind(this),this.setSessionProperty=this.setSessionProperty.bind(this),this._initStarted=((n=window.engagement)==null?void 0:n._initStarted)===!0,this._configuration={...this._configuration,...r,options:{...this._configuration.options,...r.options}},this._configuration.options.logger&&this._configuration.options.logger.enable((o=this._configuration.options.logLevel)!=null?o:2)}init(e,r){var n;if(this._configuration.apiKey){x.warn("Engagement SDK has already been initialized. Ignoring additional init call.");return}this._configuration={...this._configuration,apiKey:e,...r,options:{...this._configuration.options,...r==null?void 0:r.options}},this._configuration.options.logger&&this._configuration.options.logger.enable((n=this._configuration.options.logLevel)!=null?n:2)}plugin(e){return{name:"@amplitude/engagement-browser",type:"enrichment",setup:async(o,i)=>{var m;let l=(m=o.instanceName)!=null?m:zt,u=ct.getInstance(l).identityStore;await this.boot({user:()=>{let b=u.getIdentity();return{user_id:i.getUserId(),device_id:i.getDeviceId(),user_properties:b.userProperties,getSessionId:i.getSessionId}},integrations:[{track:b=>{i.track(b)}}]}),u.addIdentityListener(b=>{this._setUserProperties(b.userProperties)})},execute:async o=>(this.forwardEvent(o),o)}}setRouter(e){this.globalActions.addCallbacks({"engagement-router":e})}async updateLanguage(e){var o;this._configuration&&(this._configuration.locale=e);let n=(await fe(this._configuration.apiKey)).nudges;(o=ce(this._))==null||o.forEach(i=>{let l=n.find(u=>u.variantId===i.getSnapshot().context.nudge.variantId);l&&(i==null||i.send({type:"REFRESH_NUDGE",nudge:l}))})}async decide(){if(!this._.user){x.error("User must be set before calling decide");return}if(!this._configuration.apiKey){x.error("API key must be set before calling decide");return}return this._.decide=await jr.decide(this._configuration.apiKey,this._.user,this._.isEditorPreview),this._.decide}shutdown(){this._.integrations=[],this._.decide=void 0,this._.user=void 0,this._.endUserStore.reset()}async boot(e){var r,n,o,i;if(typeof e.user=="function")try{this._.user=e.user()}catch(l){x.error("Failed to get user from provider function",l)}else typeof e=="string"?this._.user={user_id:e}:typeof e.user=="string"?this._.user={user_id:e.user}:this._.user=e.user;if(!this._.user||!this._.user.user_id&&!this._.user.device_id){x.error("User must specify at least a user_id or device_id"),this._.user=void 0;return}this._.user=this._.services.enrichUser(this._.user),this._.integrations=[],(r=e.integrations)==null||r.forEach(l=>{this.addIntegration(l)}),x.log("booting...",JSON.stringify(this._.user,null,2));try{await this.decide(),x.debug("Decide data fetched successfully")}catch(l){x.error("Failed to fetch decide data",l),(n=ee())==null||n.captureException(l)}try{await this._.endUserStore.fetchData(),this._.endUserStore.initializedSuccessfully&&(this._analytics.setBootStatus(!0),(o=this._.nudgesManager)==null||o.send({type:"END_USER_STORE_LOADED"}),x.debug("End user state loaded successfully"))}catch(l){x.error("Failed to fetch end user state",l),(i=ee())==null||i.captureException(l)}}forwardEvent(e){typeof e=="string"&&(e={event_type:e}),x.debug(`Registering event ${e.event_type}`),zr(this._,e.event_type,e.event_properties)}addIntegration(e){this._.integrations.push(e)}setThemeMode(e){["lightMode","darkMode","auto"].includes(e)&&(this._.themeMode=e)}addCallback(e,r){this.globalActions.addCallbacks({[e]:r})}setSessionProperty(e,r){if(!Or(e)){console.error("Invalid session property key",e);return}if(!Rr(r)){console.error("Invalid session property value",r);return}this.globalActions.setSessionProperties({[e]:r})}registerAction(e,r){let n=Mt(this._,e);if(!n){x.warn(`registerAction: Guide or survey with variantId: ${e} not found`);return}if(r.type==="show")this.nudgeActions.forceTriggerSingleNudge(n,{source:{type:"sdk"}});else if(r.type==="dismiss")Be(this._,n,0);else if(r.type==="snooze")Yr(this._,n,n.snoozeDuration,0);else if(r.type==="ctaClick"){let o=Z(this._,e),i=te(this._,e),l=(i==null?void 0:i.currentStep)||0,u=n.steps[l];if(!u){x.error(`registerAction: Step ${l} not found for nudge ${e}`);return}let m=u.content.find(p=>{var d;return p.type==="button"&&((d=p.meta)==null?void 0:d.buttonType)===r.buttonType});if(!m){x.error(`registerAction: No button with type ${r.buttonType} found in step ${l}`);return}r.surveyResponse&&(o==null||o.send({type:"UPDATE_SURVEY_RESPONSE",surveyResponse:r.surveyResponse}));let b=m.meta,s=Lr(u,{buttonMeta:b,surveyResponse:r.surveyResponse});Jr(this._,s,b,0,o)}else x.error(`registerAction: Invalid action type "${r.type}". Must be "show", "dismiss", "snooze", or "ctaClick"`)}async _configUser(){var u;(u=ee())==null||u.addBreadcrumb({level:"debug",category:"internal",message:"_configUser called"});let{organization:e,nudges:r,flags:n,themes:o,resourceCenters:i}=await fe(this._configuration.apiKey,this._.isEditorPreview);this._.flags=n,this._.themes=o;let[l]=i;l&&(this._.resourceCenter={...this._.resourceCenter,...l}),this.globalActions.setOrganization(e),this.nudgeActions.initNudges(r||[]),this.nudgeActions.setupTimedTriggers([...r])}_updateEditorPreviewDevice(e){this._.editorPreviewDevice=e}_getEditorPreviewDevice(){return this._.editorPreviewDevice}async _reload(e=ts){let r=await fe(this._configuration.apiKey,this._.isEditorPreview);for(let n of e){let i=this[n];i instanceof Function&&i(r)}}async _reloadOrganization(e){let{organization:r}=e||await fe(this._configuration.apiKey,this._.isEditorPreview);this.globalActions.setOrganization(r)}async _reloadNudges(e){let{nudges:r}=e||await fe(this._configuration.apiKey,this._.isEditorPreview);this.nudgeActions.initNudges(r||[])}async _reloadThemes(e){let{themes:r}=e||await fe(this._configuration.apiKey,this._.isEditorPreview);this._.themes=r}_startNudgeDebug(e){let{nudge:r}=e;this.nudgeActions.closeAllNudgeMocks(),this.nudgeActions.startDebugSession(r,{refreshDecide:!0,toStepIndex:0})}async _stopNudgeDebug(){this.nudgeActions.stopDebugSession()}_showNudgeStepMock(e){var r;(r=ce(this._))==null||r.forEach(n=>{n==null||n.send({type:"CLOSE"})}),this.nudgeActions.showStepMock(e.nudge,e.stepIndex,{forceOpen:e.forceOpen})}_closeNudgeMocks(){this.nudgeActions.closeAllNudgeMocks()}_setUserProperties(e){if(!this._.user){x.error("User is undefined, likely hasn't been booted yet");return}this._.user.user_properties={...this._.user.user_properties,...e}}_shareConfig(){return{organization:this._.organization||void 0,nudges:Se(this._)}}_shareTrackedEvents(){return{trackedEvents:[...this._.trackedAppEvents]}}_startDebug(){J.set("debug:nudges","true"),x.log("Enabled debugging for nudges. Restart the application.")}_stopDebug(){J.remove("debug:nudges"),x.log("Disabled debugging for nudges. Restart the application.")}_showResourceCenter(e,r){this.resourceCenterActions.showResourceCenter(e),(r==null?void 0:r.recSet)!==void 0&&this.resourceCenterActions.previewRecSet(r.recSet),r!=null&&r.resourceCenter&&(r==null?void 0:r.quickLinks)!==void 0&&this.resourceCenterActions.previewResourceCenter(r.resourceCenter,r.quickLinks),(r==null?void 0:r.autopilotKeywords)!==void 0&&this.resourceCenterActions.previewAutopilotKeywords(r.autopilotKeywords),(r==null?void 0:r.contentItemId)!==void 0&&this.resourceCenterActions.previewContentItem(r.contentItemId)}_startChat(e,r){e&&e!=="behavior-settings"&&r&&r.length>0&&this.resourceCenterActions.setCurrentChatSession(e,r,!0),this.resourceCenterActions.setInitialPage({item:{page:"assistant",params:{}}}),this.resourceCenterActions.showResourceCenter(!0)}_shareCurrentChatSession(){return this._.resourceCenter.currentChatSession}async _getDebugSnapshot(e){if(e!=null&&e.variantId){if(typeof e.variantId=="number"){let n=Mt(this._,e.variantId);if(n){let o=typeof e.stepIndex=="number"?e.stepIndex:0,i=await Rt(this._,n,o),{name:l}=_t(n),u=`${l} debug snapshot: ${i.guideOrSurvey.title} - ${i.guideOrSurvey.variant}`;console.log(u,i)}}return}let r=Se(this._);for(let n of r){let o=await Rt(this._,n),{name:i}=_t(n),l=`${i} debug snapshot: ${o.guideOrSurvey.title} - ${o.guideOrSurvey.variant}`;console.log(l,o)}}_debugStatus(){console.log({user:this._.user,apiKey:this._configuration.apiKey,stateInitialized:this._.endUserStore.initializedSuccessfully,decideSuccessful:this._.decide!=null,num_guides_surveys:Se(this._).length,analyticsIntegrations:this._.integrations.length})}_setTheme(e,r){e||(this._.themeOverride=void 0),this._.themeOverride={theme:e,mode:r}}_showWidgetTableau(e,r){this._.widgetTableauSelection=r,this._.showWidgetTableau=e}_addCallback(e,r){this.globalActions.addCallbacks({[e]:r})}_clearNudgeInteractions(e){e?this._.endUserStore.data={nudgeInteractions:{...this._.endUserStore.data.nudgeInteractions,[e]:Tt()}}:this._.endUserStore.data={nudgeInteractions:Object.fromEntries(Object.keys(this._.endUserStore.data.nudgeInteractions).map(r=>[r,Tt()]))},this._.endUserStore.pushData()}};f();var So=async(t,e)=>{let r=(u,m)=>{let b=m.split("."),s=u;for(let p of b){if(!(p in s)){x.warn(`Engagement SDK method ${m} is not defined.`);return}s=s[p]}return s},n=async u=>{let m=[...u],b=m.shift(),s=r(t,b);if(s)if(dt.includes(b))if(m[0]instanceof Function){let p=m.shift(),d=m.shift();try{await s(...m).then(p,d)}catch(c){x.error(c)}}else await s(...m);else await s(...m)},i=(async u=>{do{let m=e.findIndex(s=>(s==null?void 0:s[0])===u);if(m===-1)break;let b=e.splice(m,1)[0];await n(b)}while(!0)})("boot"),l=[];for(;e.length>0;){let u=e.shift();if(!u)continue;let m=u[0];if(m==="boot"){l.push(u);continue}wo.includes(m)?await n(u):n(u)}return e.length=0,i.then(async()=>{for(let u=0;u<l.length;u++){let m=l[u];await n(m)}}),t};f();var ns=4,os=500,is=500,Eo=t=>{let e,r=0,n=0,o=()=>{let i=Date.now();i-n<=is&&(r+=1,clearTimeout(e),e=setTimeout(()=>r=0,os)),n=i,r>=ns&&(t.messageBus.publish("rage_click"),r=0,clearTimeout(e))};return document.body.addEventListener("click",o),()=>{document.body.removeEventListener("click",o)}};f();var xo=t=>{let i=0,l=-1,u=-1,m=-1,b,s=p=>{let{clientX:d,clientY:c,timeStamp:a}=p;if(l!==-1&&u!==-1&&m!==-1){let y=Math.abs(d-l),w=Math.abs(c-u);Math.sqrt(y**2+w**2)/(a-m)>5&&a-m<=100&&(i+=1,clearTimeout(b),b=setTimeout(()=>i=0,500)),i>=15&&(t.messageBus.publish("user_confusion"),i=0,clearTimeout(b))}l=d,u=c,m=a};return document.body.addEventListener("mousemove",s),()=>{document.body.removeEventListener("mousemove",s)}};f();var ko=U(Fn()),ss=5e3,as=6e4,Co=t=>{let e=!1,r=()=>{e&&t.messageBus.publish("user_inactive")};setTimeout(()=>e=!0,as);let n=(0,ko.default)(r,ss);return document.body.addEventListener("mousemove",n),document.body.addEventListener("keydown",n),()=>{document.body.removeEventListener("mousemove",n),document.body.removeEventListener("keydown",n)}};f();var To=t=>{t.messageBus.subscribe("location_change",()=>{var r,n,o;(r=ce(t))==null||r.forEach(i=>{let l=i.getSnapshot(),u=l.context.nudge;l.matches({Step:"Render Loop"})&&Br(t,u)&&(i==null||i.send({type:"CLOSE"}))});let e=Pr(((n=t.organization)==null?void 0:n.shareLinkParam)||It,t.location.search);if(e){let i=e.flagKey,l=Se(t);if((o=t.nudgesManager)==null||o.send({type:"HANDLE_SHARE_LINK",flagKey:i}),l.find(u=>u.flagKey===i)){let u=new URL(window.location.href);u.searchParams.delete(It);let m=u.toString();window.history.replaceState({},document.title,m)}}Ot(t,{trigger:{type:"active"},source:{type:"active"},overrides:{cooldown:!0,customThrottles:!0,page:!0}}),Ot(t,{trigger:{type:"immediately"},source:{type:"trigger",properties:{triggerType:"immediately"}}})})};f();var Io=t=>{let e=r=>{let n=r.data.action;if(n)n==="startDebugSession"?t.messageBus.publish("start_debug",{event:r}):n==="startRecorderSession"&&t.messageBus.publish("start_recorder",{event:r});else return};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}};f();f();var _o=U(Fn());var cs={observerOptions:{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]},debounceMs:150},ut=class{constructor(e,r,n=[],o={}){this.mutationObserver=null;this.processMutationsImmediately=()=>{if(this.mutationObserver)try{this.onMutations()}catch(e){x.error("Error processing mutations:",{error:e})}};this.handleMutations=e=>{try{e.some(n=>this.shouldProcessMutation(n))&&this.processMutationsDebounced()}catch(r){x.error("Error handling mutations:",{error:r,mutationCount:e.length})}};this.target=e,this.onMutations=r,this.filters=n,this.options={...cs,...o},this.processMutationsDebounced=(0,_o.default)(this.processMutationsImmediately,this.options.debounceMs,{maxWait:this.options.debounceMs*2})}shouldProcessMutation(e){if(this.filters.length===0)return!0;try{return this.filters.every(r=>r(e))}catch(r){return x.error("Error in mutation filter:",{error:r,mutation:e}),!1}}cleanup(){var e;this.processMutationsDebounced.cancel(),(e=this.mutationObserver)==null||e.disconnect(),this.mutationObserver=null}observe(){return this.mutationObserver&&this.cleanup(),this.mutationObserver=new MutationObserver(this.handleMutations),this.mutationObserver.observe(this.target,this.options.observerOptions),()=>{this.cleanup()}}};var ds=t=>!(ke(t.target)||Array.from(t.addedNodes).some(ke)||Array.from(t.removedNodes).some(ke)),Ao=t=>new ut(document.documentElement,()=>{t.messageBus.publish("dom_mutation")},[ds]).observe();f();f();var oe=U(z());var Mo=(t,e,r,n={})=>{var m,b,s,p,d;if((s=(b=(m=me())==null?void 0:m[B])==null?void 0:b.options)!=null&&s.headless)return;let o=(p=n==null?void 0:n.renderMode)!=null?p:0;e=Wr(e,t);let i=Dr(e);if(Ye(e)){t.activeChecklist={nudge:e,renderMode:o,defaultOpenIdx:o===1?r:void 0};return}if(Ur(e)){let[c]=e.steps,a=`${e.variantId}-${String(c.id)}${o===1?"-mock":""}`;De(a,{asChild:!0,element:oe.default.createElement(ao,{forceOpen:n==null?void 0:n.forceOpen,nudge:e,renderMode:o,step:c,anchorOverride:n==null?void 0:n.anchorOverride,handleDestroy:()=>Be(t,e,o),onMarkerView:()=>{if(o===1)return;let y=Z(t,e.variantId);Re.nudge.tooltipMarkerViewed(e,r,{...y==null?void 0:y.getSnapshot().context,interactionState:te(t,e.variantId)})},onOpen:()=>{o!==1&&Re.nudge.viewed(e,r,{...n.context,interactionState:te(t,e.variantId)})}})});return}if(Fr(e)){let[c]=e.steps,a=`${e.variantId}-${String(c.id)}${o===1?"-mock":""}`;qn(a,{element:oe.default.createElement(Ln,{nudge:e,stepIndex:r,renderMode:o}),sticky:c==null?void 0:c.formFactor.sticky,position:c==null?void 0:c.formFactor.position});return}let l=ge(e,r),u=()=>{i&&Be(t,e,o)};switch(l==null?void 0:l.formFactor.type){case"popover":{let c=`${e.variantId}-${String(l.id)}${o===1?"-mock":""}`,a=l.formFactor.position==="center";De(c,{element:oe.default.createElement(Ut,{nudge:e,renderMode:o,stepIndex:r,center:a}),position:l.formFactor.position,duration:Number.POSITIVE_INFINITY,hasWideContent:At(l),themeProvider:({children:y})=>oe.default.createElement(ae,{nudge:e},y),onEscapeKeyDown:u});break}case"modal":{t.currentModalNudge=_r({nudge:e,stepIndex:r,renderMode:o});break}case"pin":{Ze(l)&&De(`${e.variantId}-${String(l.id)}${o===1?"-mock":""}`,{element:oe.default.createElement(Dn,{nudge:e,step:l,renderMode:o,stepIndex:r,anchorOverride:n==null?void 0:n.anchorOverride}),duration:Number.POSITIVE_INFINITY,themeProvider:({children:c})=>oe.default.createElement(ae,{nudge:e},c),onEscapeKeyDown:u,onEnterKeyDown:()=>Zr(t,e)});break}default:{(d=ar())==null||d.captureMessage(`Unknown form factor type: ${l==null?void 0:l.formFactor}`,"error",{captureContext:{tags:{product:"nudges"}}});let c=l&&At(l);De(`${e.variantId}-${String(l==null?void 0:l.id)}${o===1?"-mock":""}`,{element:oe.default.createElement(Ut,{nudge:e,renderMode:o,stepIndex:r}),position:"top-right",duration:Number.POSITIVE_INFINITY,hasWideContent:c,themeProvider:({children:a})=>oe.default.createElement(ae,{nudge:e},a),onEscapeKeyDown:u})}}};f();var No=(t,e)=>{let r=xe(t);if(!r)return;let n=()=>{e()};return r.addEventListener("click",n),()=>r.removeEventListener("click",n)};f();var Po=(t,e)=>{var r,n;for(let o=0;o<e.steps.length;o++){let i=ge(e,o);((r=t.currentModalNudge)==null?void 0:r.renderMode)===1&&(t.currentModalNudge=null),((n=t.activeChecklist)==null?void 0:n.renderMode)===1&&(t.activeChecklist=null),Dt(`${e.variantId}-${String(i==null?void 0:i.id)}-mock`),Kt(`${e.variantId}-${String(i==null?void 0:i.id)}-mock`)}},Oo=t=>{var e,r;an(/-mock$/),Gn(/-mock$/),((e=t.currentModalNudge)==null?void 0:e.renderMode)===1&&(t.currentModalNudge=null),((r=t.activeChecklist)==null?void 0:r.renderMode)===1&&(t.activeChecklist=null)},Ro=(t,e,r)=>{var o;let n=ge(e,r);if(Ye(e)){if(!t.activeChecklist)return;t.activeChecklist=null}else $r(n)&&((o=t.currentModalNudge)==null?void 0:o.renderMode)!==1?t.currentModalNudge=null:(Dt(`${e.variantId}-${String(n==null?void 0:n.id)}`),Kt(`${e.variantId}-${String(n==null?void 0:n.id)}`))};f();var Bo=(t,e)=>{Un(t,e)},Do=(t,e)=>{t.resourceCenter.currentContentItemId=e?e.toString():null},Lo=(t,e)=>{t.resourceCenter.previewedRecommendationSet=e},Uo=(t,e,r)=>{t.resourceCenter={...t.resourceCenter,...e,previewedAdditionalResources:r}},Fo=(t,e)=>{t.resourceCenter.customAutopilotKeywords=e};f();var $o=async(t,e)=>{var n,o;let r=()=>{};switch((n=e==null?void 0:e.meta)==null?void 0:n.type){case"intercom":r=()=>window.Intercom("showNewMessage");break;case"helpscout":r=()=>window.Beacon("open");break;case"freshdesk":r=()=>window.FreshworksWidget("open");break;case"freshchat":{r=async()=>window.fcWidget.open();break}case"gist":r=()=>window.gist.chat("open");break;case"crisp":r=()=>{window.$crisp.push(["do","chat:open"]),window.$crisp.push(["do","chat:show"])};break;case"talkdesk_v2":r=()=>{window.webchat.open()};break;case"zendesk":{r=()=>{try{window.zE("messenger","open")}catch(i){window.zE("webWidget","open"),window.zE("webWidget","show")}};break}case"liveChat":r=()=>window.LiveChatWidget.call("maximize");break;case"olark":r=()=>window.olark("api.box.expand");break;case"hubspot":r=()=>window.HubSpotConversations.widget.open();break;case"drift":r=()=>window.drift.api.openChat();break;case"pylon":r=()=>window.Pylon("show")}try{await r()}catch(i){(o=ee())==null||o.captureException(i)}},Ko=(t,e,r)=>{let n=Hr(e.value,t,!0);if(r){window.open(n,"_blank");return}switch(e.operation){case"router":{let o=t.callbacks["engagement-router"];if(o)o(n);else throw new Kr("Link is of router type, but router is not defined.");break}case"self":window.open(n,"_self");break;case"blank":window.open(n,"_blank");break;default:window.open(n,"_blank");break}},Ho=(t,e)=>{};var ls=Wo().UAParser,us=()=>typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||"",ps=t=>{var e,r;return[(e=t.browser)==null?void 0:e.name,(r=t.browser)==null?void 0:r.major].filter(n=>n!=null).join(" ")},ms=t=>{var e;return(e=t.os)==null?void 0:e.name},gs=t=>{var r;let e=(r=t.browser)==null?void 0:r.name;return e!=null&&e.includes("Chrom")&&(e="Chrome"),e!=null&&e.includes("Firefox")&&(e="Firefox"),e!=null&&e.includes("Safari")&&(e="Safari"),e!=null&&e.includes("Edge")&&(e="Edge"),e!=null&&e.includes("Opera")&&(e="Opera"),e||"Unknown"},fs=()=>{var t;if((t=window==null?void 0:window.document)!=null&&t.cookie)try{return Object.fromEntries(window.document.cookie.split("; ").map(e=>e.split("=")))}catch(e){return}},hs=t=>{var e,r;try{let n=JSON.parse(Pt.get(t,"{}"));return n.landing_url||(n.landing_url=(r=(e=window==null?void 0:window.location)==null?void 0:e.href)==null?void 0:r.replace(/\/$/,""),Pt.set(t,JSON.stringify(n))),n.landing_url}catch(n){return}},ys=t=>{try{let e=JSON.parse(J.get(t,"{}"));return e.first_seen||(e.first_seen=(Date.now()/1e3).toString(),J.set(t,JSON.stringify(e))),e.first_seen}catch(e){return}},bs=()=>{var e;if(!(window!=null&&window.location))return;let t={};try{let r=new URL(window.location.href);for(let[n,o]of r.searchParams)t[n]=[...(e=t[n])!=null?e:[],...o.split(",")]}catch(r){return}return Object.entries(t).reduce((r,[n,o])=>(r[n]=o.length===1?o[0]:o,r),{})},ws=t=>{var n,o,i,l,u,m,b;let e=typeof(window==null?void 0:window.navigator)<"u"?window.navigator.userAgent:void 0,r=new ls(e).getResult();return{language:us(),platform:"Web",os:ps(r),device_model:ms(r),device_category:(o=(n=r.device)==null?void 0:n.type)!=null?o:"desktop",referring_url:(i=window==null?void 0:window.document)==null?void 0:i.referrer.replace(/\/$/,""),cookie:fs(),browser:gs(r),landing_url:hs(`ENGAGEMENT_${(u=(l=window.engagement)==null?void 0:l[B].apiKey)==null?void 0:u.slice(0,10)}_DEFAULT_USER_PROVIDER`),first_seen:ys(`ENGAGEMENT_${(b=(m=window.engagement)==null?void 0:m[B].apiKey)==null?void 0:b.slice(0,10)}_DEFAULT_USER_PROVIDER`),url_param:bs(),user_agent:e,...t}},zo={renderNudge:Mo,addClickListener:No,clickElement:pn,closeNudgeMock:Po,closeAllNudgeMocks:Oo,closeStep:Ro,onLocationChange:on,postMessageToDashboard:Je,openChatExecutable:$o,linkExecutable:Ko,appReviewExecutable:Ho,getDefaultUIMode:rn,isElementVisible:mn,matchesSelector:un,showResourceCenter:Bo,setCurrentContentId:Do,previewRecSet:Lo,previewResourceCenter:Uo,previewAutopilotKeywords:Fo,enrichUser:ws};f();var Vt=async(t,e)=>{let r=await fetch(t,{...e,body:e.body!=""?e.body:void 0});return{status:r.status,statusText:r.statusText,headers:Object.fromEntries(r.headers.entries()),data:await r.text(),ok:r.ok}};typeof window<"u"?window.simpleFetch=Vt:typeof globalThis<"u"?globalThis.simpleFetch=Vt:typeof window<"u"&&(window.simpleFetch=Vt);f();var vs=t=>{let e=new TextEncoder().encode(t),r=Array.from(e,n=>String.fromCodePoint(n)).join("");return btoa(r)},Ss=t=>{let e=atob(t),r=new TextEncoder().encode(e);return JSON.parse(new TextDecoder().decode(r))};globalThis.base64Encode=vs;globalThis.base64Decode=Ss;f();var Es=t=>!t.target||!ke(t.target),Vo=t=>{let e=r=>{Es(r)&&t.messageBus.publish("click",{event:{type:r.type,target:r.target,currentTarget:r.currentTarget,preventDefault:()=>r.preventDefault(),stopPropagation:()=>r.stopPropagation()}})};return document.body.addEventListener("click",e),()=>{document.body.removeEventListener("click",e)}};f();var xs=30,ks=0,jo=t=>{let e=null,r=()=>{t.messageBus.publish("exit_intent")},n=i=>{i.clientY>xs||(e=setTimeout(r,ks))},o=()=>{e&&(clearTimeout(e),e=null)};return document.documentElement.addEventListener("mouseleave",n),document.documentElement.addEventListener("mouseenter",o),()=>{document.body.removeEventListener("mouseleave",n),document.body.removeEventListener("mouseenter",o)}};f();var qo="gs-debug-id",Go=t=>{t.messageBus.subscribe("location_change",()=>{let r=new URLSearchParams(t.location.search).get(qo);if(r){let n=new URL(window.location.href);n.searchParams.delete(qo);let o=n.toString();window.history.replaceState({},document.title,o),Gr(t,{variantId:Number(r)},{toStepIndex:0})}})};var Cs=()=>{let t=document.getElementById("engagement-wrapper"),e=document.getElementById("engagement-container");return t||(t=document.createElement("div"),t.setAttribute("id","engagement-wrapper"),t.setAttribute("data-engagement","1"),document.body.appendChild(t)),e||(e=document.createElement("div"),e.setAttribute("id","engagement-container"),e.setAttribute("data-engagement","1"),t.appendChild(e)),e},Ts=t=>{switch(t){case"US":return"https://gs.amplitude.com";case"EU":return"https://gs.eu.amplitude.com";default:return"http://localhost:10001"}},Is=t=>{switch(t){case"US":return"https://houston-chat.amplitude.com";case"EU":return"https://houston-chat.eu.amplitude.com";default:return"http://localhost:11001"}},jt={local:"http://localhost:10002/index.js",staging:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",stag:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",stag2:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",rc:"https://cdn.amplitude.com/engagement-browser/rc/index.min.js.gz",prod:"https://cdn.amplitude.com/engagement-browser/prod/index.min.js.gz",prodEu:"https://cdn.amplitude.com/engagement-browser/prod-eu/index.min.js.gz"},qt={local:"http://localhost:10002/split/index.js",staging:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",stag:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",stag2:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",rc:"https://cdn.amplitude.com/engagement-browser/rc/split/index.js",prod:"https://cdn.amplitude.com/engagement-browser/prod/split/index.js",prodEu:"https://cdn.amplitude.com/engagement-browser/prod-eu/split/index.js"},Gt={local:"http://localhost:10001",staging:"https://gs.stag2.amplitude.com",stag:"https://gs.stag2.amplitude.com",stag2:"https://gs.stag2.amplitude.com",prod:"https://gs.amplitude.com",prodUs:"https://gs.amplitude.com",prodEu:"https://gs.eu.amplitude.com"},Yt={local:"http://localhost:11001",staging:"https://houston-chat.stag2.amplitude.com",stag:"https://houston-chat.stag2.amplitude.com",stag2:"https://houston-chat.stag2.amplitude.com",rc:"https://houston-chat.stag2.amplitude.com",prod:"https://houston-chat.amplitude.com",prodUs:"https://houston-chat.amplitude.com",prodEu:"https://houston-chat.eu.amplitude.com"};function _s(t){let e={};return t.split(";").forEach(n=>{let[o,i]=n.split("=");o&&(e[o]=i)}),e}var Yo=async()=>{var c,a,y,w,h,g,v;let t=localStorage.getItem("amplitude.engagement.launchCode");if(t){let S=_s(t),D=document.currentScript||document.getElementById("engagement-sdk-bundle");if(D){let I=window.engagement[B].options.splitting&&(S==null?void 0:S.sdk)!=="local",O=I?qt==null?void 0:qt[S==null?void 0:S.sdk]:jt==null?void 0:jt[S==null?void 0:S.sdk];if(O&&D.src!==O){(c=D.parentNode)==null||c.removeChild(D);let P=document.createElement("script");P.src=O,P.id="engagement-sdk-bundle";let q=document.querySelector("[nonce]");q&&P.setAttribute("nonce",q.nonce||q.getAttribute("nonce")),I&&P.setAttribute("type","module"),document.getElementsByTagName("head")[0].appendChild(P);return}}if(S!=null&&S.server){let I=Gt==null?void 0:Gt[S==null?void 0:S.server];I&&(window.engagement[B].serverUrl=I);let O=Yt==null?void 0:Yt[S==null?void 0:S.server];O&&(window.engagement[B].chatUrl=O)}}if(((a=window.engagement)==null?void 0:a._initStarted)===!0)return;window.engagement&&(window.engagement._initStarted=!0);let e=window.engagement,{apiKey:r,serverUrl:n,serverZone:o,chatUrl:i}=e._configuration,l=J.get("takeover","");if(!r)throw new Error("Organization `apiKey` has not been set on the global _configuration object. Make sure you've called `init` before loading this script");let u=J.get("localeOverride","");u&&(e[B].locale=u),e[B].serverUrl=n||Ts(o),e[B].chatUrl=i||Is(o),e[B].apiKey=r;let m=!!((y=e[B].options)!=null&&y.logger);(w=e[B].options)!=null&&w.logger||(e[B].options.logger=new ir),(h=e[B].options)!=null&&h.logger&&e[B].options.logger.enable((v=(g=e[B].options)==null?void 0:g.logLevel)!=null?v:2),m?x.log("Using custom logger",e[B].options.logger):x.log("Using default logger"),l&&(e[B].apiKey=l),x.log("initializing client SDK..."),sn();let b=document.getElementById("engagement-is-dashboard-preview-pane")!==null,s=document.getElementById("assistant-preview-pane-iframe")!==null,p=Qr({isEditorPreview:b,isAssistantPreview:s,platform:nn(),location:{href:window.location.href,pathname:window.location.pathname,search:window.location.search},services:zo,persistResourceCenter:e._configuration.options.persistResourceCenter});en(p),e._configuration.options.headless||(Eo(p),xo(p),Co(p),jo(p),Ao(p),Vo(p),To(p),Go(p)),Io(p);let d=new lt(p,e._configuration);if(d._sentry=sr("https://86e449af9e7145de4804c2143988499b@o13027.ingest.us.sentry.io/4508580659462144"),await d._configUser(),d=await So(d,e._q),Object.assign(window.engagement,d),Object.setPrototypeOf(window.engagement,d),e._configuration.options.headless)x.debug("Engagement bundle loaded in headless mode - no UI rendered");else{let S=Cs();Xo.default.render(Zo.default.createElement(lo,{store:p}),S),x.debug("Engagement bundle loaded and container rendered")}};Je("ENGAGEMENT_LOADED");window.engagement?Yo().catch(console.error):window.engagement=vo(Yo);var qu=void 0;export{qu as default};
